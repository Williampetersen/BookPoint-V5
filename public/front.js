(()=>{"use strict";var e={338(e,s,a){var t=a(795);s.H=t.createRoot,t.hydrateRoot},795(e){e.exports=window.ReactDOM}},s={};const a=window.React;var t=function a(t){var n=s[t];if(void 0!==n)return n.exports;var i=s[t]={exports:{}};return e[t](i,i.exports,a),i.exports}(338);async function n(e,s={}){var a;const t=window.BP_FRONT?.restUrl||"/wp-json/bp/v1",n=window.BP_FRONT?.nonce,i=await fetch(`${t}${e}`,{...s,headers:{"Content-Type":"application/json",...n?{"X-WP-Nonce":n}:{},...s.headers||{}}}),c=await i.json().catch(()=>({}));if(!i.ok||"error"===c?.status)throw new Error(c?.message||"Request failed");return null!==(a=c?.data)&&void 0!==a?a:c}const i=({service_id:e})=>n("/front/extras",{method:"POST",body:JSON.stringify({service_id:e})}),c=({service_id:e,location_id:s})=>n("/front/agents",{method:"POST",body:JSON.stringify({service_id:e,location_id:s})}),l=async()=>{const e=await n("/front/form-fields"),s=[],a=[],t=[];return(Array.isArray(e)?e:[]).forEach(e=>{const n=e.scope||"customer";"booking"===n?t.push(e):"form"===n?s.push(e):a.push(e)}),{form:s,customer:a,booking:t}},r=window.ReactJSXRuntime;function o({locations:e,value:s,onChange:t,onNext:n}){const[i,c]=(0,a.useState)(""),l=(0,a.useMemo)(()=>{const s=i.trim().toLowerCase();return s?e.filter(e=>(e.name||"").toLowerCase().includes(s)):e},[i,e]),o=!!s;return(0,r.jsxs)("div",{className:"bp-step",children:[(0,r.jsx)("div",{className:"bp-step-search",children:(0,r.jsx)("input",{value:i,onChange:e=>c(e.target.value),placeholder:"Search...",className:"bp-input"})}),(0,r.jsxs)("div",{className:"bp-list",children:[l.map(e=>(0,r.jsxs)("button",{type:"button",className:String(s)===String(e.id)?"bp-card active":"bp-card",onClick:()=>t(e.id),children:[(0,r.jsx)("div",{className:"bp-card-title",children:e.name}),(0,r.jsx)("div",{className:"bp-card-sub",children:e.address||""})]},e.id)),l.length?null:(0,r.jsx)("div",{className:"bp-empty",children:"No locations found."})]}),(0,r.jsxs)("div",{className:"bp-step-footer",children:[(0,r.jsx)("div",{}),(0,r.jsx)("button",{type:"button",className:"bp-next",disabled:!o,onClick:()=>n(),children:"Next ->"})]})]})}function d({categories:e,value:s,onChange:t,onBack:n,onNext:i}){const[c,l]=(0,a.useState)(""),o=(0,a.useMemo)(()=>{const s=c.trim().toLowerCase();return s?e.filter(e=>(e.name||"").toLowerCase().includes(s)):e},[c,e]),d=s.length>0;return(0,r.jsxs)("div",{className:"bp-step",children:[(0,r.jsx)("input",{value:c,onChange:e=>l(e.target.value),placeholder:"Search...",className:"bp-input"}),(0,r.jsxs)("div",{className:"bp-grid",children:[o.map(e=>{const a=s.some(s=>String(s)===String(e.id));return(0,r.jsx)("button",{type:"button",className:a?"bp-tile active":"bp-tile",onClick:()=>function(e){const a=String(e),n=s.some(e=>String(e)===a)?s.filter(e=>String(e)!==a):[...s,e];t(n)}(e.id),children:(0,r.jsx)("div",{className:"bp-tile-title",children:e.name})},e.id)}),o.length?null:(0,r.jsx)("div",{className:"bp-empty",children:"No categories found."})]}),(0,r.jsxs)("div",{className:"bp-step-footer",children:[(0,r.jsx)("button",{type:"button",className:"bp-back",onClick:n,children:"<- Back"}),(0,r.jsx)("button",{type:"button",className:"bp-next",disabled:!d,onClick:i,children:"Next ->"})]})]})}function m(e,s){const a=(window.BP_FRONT?.images||"").replace(/\/$/,"")+"/";return e?.image_url||e?.image||""||a+s}function p({services:e,value:s,onChange:t,onBack:n,onNext:i}){const[c,l]=(0,a.useState)(""),o=(0,a.useMemo)(()=>{const s=c.trim().toLowerCase();return s?(e||[]).filter(e=>(e.name||"").toLowerCase().includes(s)):e||[]},[c,e]),d=!!s;return(0,r.jsxs)("div",{className:"bp-step",children:[(0,r.jsx)("input",{value:c,onChange:e=>l(e.target.value),placeholder:"Search service...",className:"bp-input"}),(0,r.jsxs)("div",{className:"bp-cardlist",children:[o.map(e=>{const a=String(s)===String(e.id);return(0,r.jsxs)("button",{type:"button",className:a?"bp-pickcard active":"bp-pickcard",onClick:()=>t(e.id),children:[(0,r.jsx)("div",{className:"bp-pickcard-left",children:(0,r.jsx)("img",{className:"bp-thumb",src:m(e,"service-image.png"),alt:""})}),(0,r.jsxs)("div",{className:"bp-pickcard-mid",children:[(0,r.jsx)("div",{className:"bp-pickcard-title",children:e.name}),!!e.description&&(0,r.jsx)("div",{className:"bp-pickcard-sub",children:e.description}),(0,r.jsxs)("div",{className:"bp-meta",children:[!!e.duration&&(0,r.jsxs)("span",{className:"bp-chip",children:[e.duration," min"]}),!!e.category_name&&(0,r.jsx)("span",{className:"bp-chip ghost",children:e.category_name})]})]}),(0,r.jsxs)("div",{className:"bp-pickcard-right",children:[(0,r.jsx)("div",{className:"bp-price",children:null!=e.price?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"bp-price-num",children:Number(e.price).toFixed(0)}),(0,r.jsx)("span",{className:"bp-price-cur",children:"Kr"})]}):(0,r.jsx)("span",{className:"bp-price-cur",children:"Select"})}),(0,r.jsx)("div",{className:a?"bp-radio on":"bp-radio"})]})]},e.id)}),o.length?null:(0,r.jsx)("div",{className:"bp-empty",children:"No services found."})]}),(0,r.jsxs)("div",{className:"bp-step-footer",children:[(0,r.jsx)("button",{type:"button",className:"bp-back",onClick:n,children:"<- Back"}),(0,r.jsx)("button",{type:"button",className:"bp-next",disabled:!d,onClick:i,children:"Next ->"})]})]})}function u({extras:e,value:s,onChange:t,onBack:n,onNext:i}){const[c,l]=(0,a.useState)(""),o=(0,a.useMemo)(()=>{const s=c.trim().toLowerCase();return s?(e||[]).filter(e=>(e.name||"").toLowerCase().includes(s)):e||[]},[c,e]);return(0,r.jsxs)("div",{className:"bp-step",children:[(0,r.jsx)("input",{value:c,onChange:e=>l(e.target.value),placeholder:"Search extras...",className:"bp-input"}),(0,r.jsxs)("div",{className:"bp-cardlist",children:[o.map(e=>{const a=(s||[]).some(s=>String(s)===String(e.id));return(0,r.jsxs)("button",{type:"button",className:a?"bp-pickcard active":"bp-pickcard",onClick:()=>function(e){const a=String(e),n=(s||[]).some(e=>String(e)===a)?(s||[]).filter(e=>String(e)!==a):[...s||[],e];t(n)}(e.id),children:[(0,r.jsx)("div",{className:"bp-pickcard-left",children:(0,r.jsx)("img",{className:"bp-thumb",src:m(e,"service-image.png"),alt:""})}),(0,r.jsxs)("div",{className:"bp-pickcard-mid",children:[(0,r.jsx)("div",{className:"bp-pickcard-title",children:e.name}),!!e.description&&(0,r.jsx)("div",{className:"bp-pickcard-sub",children:e.description})]}),(0,r.jsxs)("div",{className:"bp-pickcard-right",children:[(0,r.jsx)("div",{className:"bp-price",children:null!=e.price?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"bp-price-num",children:Number(e.price).toFixed(0)}),(0,r.jsx)("span",{className:"bp-price-cur",children:"Kr"})]}):(0,r.jsx)("span",{className:"bp-price-cur",children:"Extra"})}),(0,r.jsx)("div",{className:a?"bp-check on":"bp-check"})]})]},e.id)}),o.length?null:(0,r.jsx)("div",{className:"bp-empty",children:"No extras for this service."})]}),(0,r.jsxs)("div",{className:"bp-step-footer",children:[(0,r.jsx)("button",{type:"button",className:"bp-back",onClick:n,children:"<- Back"}),(0,r.jsx)("button",{type:"button",className:"bp-next",disabled:!1,onClick:i,children:"Next ->"})]})]})}function b({agents:e,value:s,onChange:t,onBack:n,onNext:i}){const[c,l]=(0,a.useState)(""),o=(0,a.useMemo)(()=>{const s=c.trim().toLowerCase();return s?(e||[]).filter(e=>(e.name||"").toLowerCase().includes(s)):e||[]},[c,e]),d=!!s;return(0,r.jsxs)("div",{className:"bp-step",children:[(0,r.jsx)("input",{value:c,onChange:e=>l(e.target.value),placeholder:"Search agent...",className:"bp-input"}),(0,r.jsxs)("div",{className:"bp-cardlist",children:[o.map(e=>{const a=String(s)===String(e.id);return(0,r.jsxs)("button",{type:"button",className:a?"bp-pickcard active":"bp-pickcard",onClick:()=>t(e.id),children:[(0,r.jsx)("div",{className:"bp-pickcard-left",children:(0,r.jsx)("img",{className:"bp-avatar",src:m(e,"default-avatar.jpg"),alt:""})}),(0,r.jsxs)("div",{className:"bp-pickcard-mid",children:[(0,r.jsx)("div",{className:"bp-pickcard-title",children:e.name}),!!e.title&&(0,r.jsx)("div",{className:"bp-pickcard-sub",children:e.title}),!!e.email&&(0,r.jsx)("div",{className:"bp-pickcard-sub small",children:e.email})]}),(0,r.jsx)("div",{className:"bp-pickcard-right",children:(0,r.jsx)("div",{className:a?"bp-radio on":"bp-radio"})})]},e.id)}),o.length?null:(0,r.jsx)("div",{className:"bp-empty",children:"No agents available for this service."})]}),(0,r.jsxs)("div",{className:"bp-step-footer",children:[(0,r.jsx)("button",{type:"button",className:"bp-back",onClick:n,children:"<- Back"}),(0,r.jsx)("button",{type:"button",className:"bp-next",disabled:!d,onClick:i,children:"Next ->"})]})]})}function h({date:e,onDateChange:s,slots:a,value:t,onSlotChange:n,onBack:i,onNext:c}){const l=!!e&&!!t;return(0,r.jsxs)("div",{className:"bp-step",children:[(0,r.jsxs)("div",{className:"bp-field",children:[(0,r.jsx)("label",{className:"bp-label",children:"Date"}),(0,r.jsx)("input",{type:"date",className:"bp-input",value:e||"",onChange:e=>s(e.target.value)})]}),(0,r.jsxs)("div",{className:"bp-field",children:[(0,r.jsx)("label",{className:"bp-label",children:"Time slots"}),(0,r.jsxs)("div",{className:"bp-slot-grid",children:[a.map(e=>{const s=t?.start_time===e.start_time;return(0,r.jsx)("button",{type:"button",className:s?"bp-slot-btn active":"bp-slot-btn",onClick:()=>n(e),children:e.label||e.start_time},e.start_time)}),a.length?null:(0,r.jsx)("div",{className:"bp-empty",children:"No available time slots."})]})]}),(0,r.jsxs)("div",{className:"bp-step-footer",children:[(0,r.jsx)("button",{type:"button",className:"bp-back",onClick:i,children:"<- Back"}),(0,r.jsx)("button",{type:"button",className:"bp-next",disabled:!l,onClick:c,children:"Next ->"})]})]})}function x(e,s){return"checkbox"===s?"1"!==e:null==e||(Array.isArray(e)?0===e.length:""===String(e).trim())}function v({formFields:e,answers:s,onChange:a,onBack:t,onNext:n,onError:i}){const c=[...e?.form||[],...e?.customer||[],...e?.booking||[]];function l(e){var a;return null!==(a=s?.[e])&&void 0!==a?a:""}return(0,r.jsxs)("div",{className:"bp-step",children:[(0,r.jsx)("div",{className:"bp-form",children:c.map(e=>{const s=e.field_key||e.name_key||"",t=`${e.scope}.${s}`,n=l(t);return(0,r.jsxs)("div",{className:"bp-field",children:[(0,r.jsxs)("label",{className:"bp-label",children:[e.label," ",e.is_required?(0,r.jsx)("span",{className:"bp-required",children:"*"}):null]}),(0,r.jsx)(g,{field:e,value:n,onChange:e=>function(e,s){a(a=>({...a,[e]:s}))}(t,e)})]},t)})}),(0,r.jsxs)("div",{className:"bp-step-footer",children:[(0,r.jsx)("button",{type:"button",className:"bp-back",onClick:t,children:"<- Back"}),(0,r.jsx)("button",{type:"button",className:"bp-next",onClick:function(){for(const e of c){if(!e.is_required)continue;const s=e.field_key||e.name_key||"";if(x(l(`${e.scope}.${s}`),e.type))return void i?.(`${e.label||s} is required`)}i?.(""),n()},children:"Next ->"})]})]})}function g({field:e,value:s,onChange:a}){const t={className:"bp-input",placeholder:e.placeholder||"",value:s||"",onChange:e=>a(e.target.value)};if("textarea"===e.type)return(0,r.jsx)("textarea",{className:"bp-input bp-textarea",rows:4,placeholder:e.placeholder||"",value:s||"",onChange:e=>a(e.target.value)});if("select"===e.type){const t=e.options?.choices||[];return(0,r.jsxs)("select",{className:"bp-input",value:s||"",onChange:e=>a(e.target.value),children:[(0,r.jsx)("option",{value:"",children:"Select..."}),t.map((e,s)=>(0,r.jsx)("option",{value:e.value,children:e.label},s))]})}if("checkbox"===e.type){const t="1"===s||!0===s;return(0,r.jsxs)("label",{className:"bp-checkbox",children:[(0,r.jsx)("input",{type:"checkbox",checked:t,onChange:e=>a(e.target.checked?"1":"0")}),(0,r.jsx)("span",{children:e.placeholder||"Yes"})]})}let n="text";return"email"===e.type&&(n="email"),"tel"===e.type&&(n="tel"),"number"===e.type&&(n="number"),"date"===e.type&&(n="date"),(0,r.jsx)("input",{...t,type:n})}function N({locationId:e,categoryIds:s,serviceId:t,extraIds:n,agentId:i,date:c,slot:l,locations:o,categories:d,services:m,extras:p,agents:u,formFields:b,answers:h,onBack:x,onSubmit:v,loading:g}){const N=o.find(s=>String(s.id)===String(e)),k=m.find(e=>String(e.id)===String(t)),f=u.find(e=>String(e.id)===String(i)),y=d.filter(e=>s.includes(e.id)||s.includes(String(e.id))),S=p.filter(e=>n.includes(e.id)||n.includes(String(e.id))),C=(0,a.useMemo)(()=>[...b?.form||[],...b?.customer||[],...b?.booking||[]],[b]);return(0,r.jsxs)("div",{className:"bp-step",children:[(0,r.jsxs)("div",{className:"bp-review",children:[(0,r.jsx)(j,{label:"Location",value:N?.name}),(0,r.jsx)(j,{label:"Categories",value:y.length?y.map(e=>e.name).join(", "):"-"}),(0,r.jsx)(j,{label:"Service",value:k?.name}),(0,r.jsx)(j,{label:"Agent",value:f?.name}),(0,r.jsx)(j,{label:"Date",value:c}),(0,r.jsx)(j,{label:"Time",value:l?.start_time?`${l.start_time} - ${l.end_time}`:"-"}),(0,r.jsx)(j,{label:"Extras",value:S.length?S.map(e=>e.name).join(", "):"-"}),(0,r.jsx)("div",{className:"bp-review-section",children:"Customer Information"}),C.map(e=>{var s;const a=e.field_key||e.name_key||"",t=`${e.scope}.${a}`;let n=null!==(s=h?.[t])&&void 0!==s?s:"";return"checkbox"===e.type&&(n="1"===n?"Yes":"No"),(0,r.jsx)(j,{label:e.label,value:String(n||"")},t)})]}),(0,r.jsxs)("div",{className:"bp-step-footer",children:[(0,r.jsx)("button",{type:"button",className:"bp-back",onClick:x,children:"<- Back"}),(0,r.jsx)("button",{type:"button",className:"bp-next",disabled:g,onClick:v,children:g?"Submitting...":"Confirm Booking"})]})]})}function j({label:e,value:s}){return(0,r.jsxs)("div",{className:"bp-review-row",children:[(0,r.jsx)("div",{className:"k",children:e}),(0,r.jsx)("div",{className:"v",children:s||"-"})]})}function k({booking:e,onClose:s}){return(0,r.jsx)("div",{className:"bp-step bp-done",children:(0,r.jsxs)("div",{className:"bp-done-card",children:[(0,r.jsx)("div",{className:"bp-done-title",children:"Booking confirmed"}),e?.booking_id?(0,r.jsxs)("div",{className:"bp-done-sub",children:["Booking ID: ",e.booking_id]}):null,e?.manage_url?(0,r.jsx)("a",{className:"bp-done-link",href:e.manage_url,target:"_blank",rel:"noreferrer",children:"Manage your booking"}):null,(0,r.jsx)("div",{className:"bp-done-actions",children:(0,r.jsx)("button",{type:"button",className:"bp-next",onClick:s,children:"Close"})})]})})}const f=[{key:"location",title:"Location Selection",icon:"location-image.png"},{key:"category",title:"Choose Category",icon:"service-image.png"},{key:"service",title:"Choose Service",icon:"service-image.png"},{key:"extras",title:"Service Extras",icon:"service-image.png"},{key:"agent",title:"Choose Agent",icon:"default-avatar.jpg"},{key:"datetime",title:"Choose Date & Time",icon:"blue-dot.png"},{key:"customer",title:"Customer Information",icon:"default-avatar.jpg"},{key:"review",title:"Review Order",icon:"white-curve.png"},{key:"done",title:"Done",icon:"logo.png"}];function y({open:e,onClose:s,brand:t}){const[m,x]=(0,a.useState)(0),[g,j]=(0,a.useState)(null),[y,C]=(0,a.useState)([]),[_,w]=(0,a.useState)(null),[B,I]=(0,a.useState)([]),[E,L]=(0,a.useState)(null),[O,P]=(0,a.useState)(null),[$,F]=(0,a.useState)(null),[T,M]=(0,a.useState)({form:[],customer:[],booking:[]}),[R,D]=(0,a.useState)({}),[A,q]=(0,a.useState)([]),[J,H]=(0,a.useState)([]),[z,K]=(0,a.useState)([]),[X,Y]=(0,a.useState)([]),[U,W]=(0,a.useState)([]),[G,Q]=(0,a.useState)([]),[V,Z]=(0,a.useState)(!1),[ee,se]=(0,a.useState)(""),ae=f[m],te=(0,a.useMemo)(()=>t?.imagesBase?t.imagesBase+ae.icon:"",[t,ae]);function ne(){se(""),x(e=>Math.min(e+1,f.length-1))}function ie(){se(""),x(e=>Math.max(e-1,0))}return(0,a.useEffect)(()=>{if(e)return document.body.classList.add("bp-modal-open"),()=>document.body.classList.remove("bp-modal-open")},[e]),(0,a.useEffect)(()=>{e&&(x(0),se(""),j(null),C([]),w(null),I([]),L(null),P(null),F(null),D({}))},[e]),(0,a.useEffect)(()=>{e&&(async()=>{try{Z(!0);const[e,s,a]=await Promise.all([n("/front/locations"),n("/front/categories"),l()]);q(e),H(s),M(a)}catch(e){se(e?.message||"Failed to load booking data.")}finally{Z(!1)}})()},[e]),(0,a.useEffect)(()=>{e&&(async()=>{try{if("service"===ae.key||"extras"===ae.key||"agent"===ae.key||"datetime"===ae.key||"review"===ae.key){const e=await(({category_ids:e=[],location_id:s=null})=>n("/front/services",{method:"POST",body:JSON.stringify({category_ids:e,location_id:s})}))({category_ids:y,location_id:g});K(e)}}catch(e){K([])}})()},[e,ae.key,y,g]),(0,a.useEffect)(()=>{e&&(async()=>{try{if(!_)return;const[e,s]=await Promise.all([i({service_id:_}),c({service_id:_,location_id:g})]);Y(e),W(s)}catch(e){Y([]),W([])}})()},[e,_,g]),(0,a.useEffect)(()=>{e&&(async()=>{try{if(!_||!E||!O)return;const e=await(({service_id:e,agent_id:s,date:a})=>n("/front/slots",{method:"POST",body:JSON.stringify({service_id:e,agent_id:s,date:a})}))({service_id:_,agent_id:E,date:O});Q(e)}catch(e){Q([])}})()},[e,_,E,O]),e?(0,r.jsx)("div",{className:"bp-modal-overlay",role:"dialog","aria-modal":"true",children:(0,r.jsxs)("div",{className:"bp-modal",children:[(0,r.jsx)("button",{className:"bp-modal-close",onClick:s,"aria-label":"Close",children:"x"}),(0,r.jsxs)("div",{className:"bp-modal-grid",children:[(0,r.jsxs)("aside",{className:"bp-side",children:[(0,r.jsx)("div",{className:"bp-side-icon",children:te?(0,r.jsx)("img",{src:te,alt:""}):null}),(0,r.jsx)("h3",{className:"bp-side-title",children:ae.title}),(0,r.jsx)("p",{className:"bp-side-desc",children:"Please complete the steps to schedule your booking."}),(0,r.jsxs)("div",{className:"bp-side-help",children:[(0,r.jsx)("div",{children:"Need help?"}),(0,r.jsx)("div",{className:"bp-help-phone",children:t?.helpPhone})]})]}),(0,r.jsxs)("main",{className:"bp-main",children:[(0,r.jsxs)("div",{className:"bp-main-head",children:[(0,r.jsx)("h2",{children:ae.title}),(0,r.jsx)("div",{className:"bp-step-dots",children:f.slice(0,8).map((e,s)=>(0,r.jsx)("span",{className:s===m?"bp-dot active":"bp-dot"},e.key))})]}),ee?(0,r.jsx)("div",{className:"bp-error",children:ee}):null,V?(0,r.jsx)("div",{className:"bp-loading",children:"Loading..."}):null,"location"===ae.key&&(0,r.jsx)(o,{locations:A,value:g,onChange:j,onNext:ne}),"category"===ae.key&&(0,r.jsx)(d,{categories:J,value:y,onChange:C,onBack:ie,onNext:ne}),"service"===ae.key&&(0,r.jsx)(p,{services:z,value:_,onChange:w,onBack:ie,onNext:ne}),"extras"===ae.key&&(0,r.jsx)(u,{extras:X,value:B,onChange:I,onBack:ie,onNext:ne}),"agent"===ae.key&&(0,r.jsx)(b,{agents:U,value:E,onChange:L,onBack:ie,onNext:ne}),"datetime"===ae.key&&(0,r.jsx)(h,{date:O,onDateChange:P,slots:G,value:$,onSlotChange:F,onBack:ie,onNext:ne}),"customer"===ae.key&&(0,r.jsx)(v,{formFields:T,answers:R,onChange:D,onBack:ie,onNext:ne,onError:se}),"review"===ae.key&&(0,r.jsx)(N,{locationId:g,categoryIds:y,serviceId:_,extraIds:B,agentId:E,date:O,slot:$,locations:A,categories:J,services:z,extras:X,agents:U,formFields:T,answers:R,onBack:ie,onSubmit:async function(){try{Z(!0),se("");const e={location_id:g,category_ids:y,service_id:_,extra_ids:B,agent_id:E,date:O,start_time:$?.start_time||$?.start||"",end_time:$?.end_time||$?.end||"",field_values:R,extras:B},s=await(e=>n("/front/bookings",{method:"POST",body:JSON.stringify(e)}))(e);D(e=>({...e,__booking:s})),x(f.findIndex(e=>"done"===e.key))}catch(e){se(e?.message||"Could not submit booking.")}finally{Z(!1)}},loading:V}),"done"===ae.key&&(0,r.jsx)(k,{booking:R.__booking,onClose:s})]}),(0,r.jsxs)("aside",{className:"bp-summary",children:[(0,r.jsx)("div",{className:"bp-summary-title",children:"Summary"}),(0,r.jsx)("div",{className:"bp-summary-box",children:(0,r.jsx)(S,{locations:A,categories:J,services:z,extras:X,agents:U,locationId:g,categoryIds:y,serviceId:_,extraIds:B,agentId:E,date:O,slot:$})})]})]})]})}):null}function S(e){const{locations:s,categories:a,services:t,extras:n,agents:i,locationId:c,categoryIds:l,serviceId:o,extraIds:d,agentId:m,date:p,slot:u}=e,b=s.find(e=>String(e.id)===String(c)),h=t.find(e=>String(e.id)===String(o)),x=i.find(e=>String(e.id)===String(m)),v=n.filter(e=>d.includes(e.id)||d.includes(String(e.id))),g=a.filter(e=>l.includes(e.id)||l.includes(String(e.id)));return(0,r.jsxs)("div",{className:"bp-summary-items",children:[(0,r.jsxs)("div",{className:"bp-summary-row",children:[(0,r.jsx)("div",{className:"k",children:"Location"}),(0,r.jsx)("div",{className:"v",children:b?.name||"-"})]}),(0,r.jsxs)("div",{className:"bp-summary-row",children:[(0,r.jsx)("div",{className:"k",children:"Category"}),(0,r.jsx)("div",{className:"v",children:g.length?g.map(e=>e.name).join(", "):"-"})]}),(0,r.jsxs)("div",{className:"bp-summary-row",children:[(0,r.jsx)("div",{className:"k",children:"Service"}),(0,r.jsx)("div",{className:"v",children:h?.name||"-"})]}),(0,r.jsxs)("div",{className:"bp-summary-row",children:[(0,r.jsx)("div",{className:"k",children:"Agent"}),(0,r.jsx)("div",{className:"v",children:x?.name||"-"})]}),(0,r.jsxs)("div",{className:"bp-summary-row",children:[(0,r.jsx)("div",{className:"k",children:"Date"}),(0,r.jsx)("div",{className:"v",children:p||"-"})]}),(0,r.jsxs)("div",{className:"bp-summary-row",children:[(0,r.jsx)("div",{className:"k",children:"Time"}),(0,r.jsx)("div",{className:"v",children:u?.start_time?`${u.start_time} - ${u.end_time}`:"-"})]}),(0,r.jsxs)("div",{className:"bp-summary-row",children:[(0,r.jsx)("div",{className:"k",children:"Extras"}),(0,r.jsx)("div",{className:"v",children:v.length?v.map(e=>e.name).join(", "):"-"})]})]})}function C({label:e}){const[s,t]=(0,a.useState)(!1),n=(window.BP_FRONT?.images||"").replace(/\/$/,"")+"/",i=(0,a.useMemo)(()=>({imagesBase:n,helpPhone:"+45 91 67 14 52"}),[n]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{className:"bp-book-btn",type:"button",onClick:()=>t(!0),children:e||"Book Now"}),(0,r.jsx)(y,{open:s,onClose:()=>t(!1),brand:i})]})}function _(){const e=document.querySelectorAll(".bp-front-root[data-bp-widget='wizard']");e.length?e.forEach(e=>{const s=(0,t.H)(e),a=e.getAttribute("data-bp-label")||"Book Now";s.render((0,r.jsx)(C,{label:a}))}):function(){const e=document.getElementById("bp-front-root");if(!e)return;const s=(0,t.H)(e),a={imagesBase:(window.BP_FRONT?.images||"").replace(/\/$/,"")+"/",helpPhone:"+45 91 67 14 52"};document.addEventListener("click",t=>{const n=t.target;n instanceof Element&&n.closest(".bp-open-wizard")&&(t.preventDefault(),e.style.display="block",s.render((0,r.jsx)(y,{open:!0,onClose:()=>{s.render(null),e.style.display="none"},brand:a})))})}()}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",_):_()})();