(()=>{"use strict";var e={338(e,s,a){var i=a(795);s.H=i.createRoot,i.hydrateRoot},795(e){e.exports=window.ReactDOM}},s={};const a=window.React;var i=function a(i){var t=s[i];if(void 0!==t)return t.exports;var d=s[i]={exports:{}};return e[i](d,d.exports,a),d.exports}(338);const t=window.ReactJSXRuntime;function d({theme:e,onToggleTheme:s,active:a,children:i}){const d=window.BP_ADMIN?.page||"bp_dashboard",n=e=>d===e;return(0,t.jsx)("div",{className:"bp-app",children:(0,t.jsxs)("div",{className:"bp-shell",children:[(0,t.jsxs)("aside",{className:"bp-sidebar",children:[(0,t.jsxs)("div",{className:"bp-brand",children:[(0,t.jsx)("div",{className:"bp-logo",children:"BP"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"bp-title",children:"BookPoint"}),(0,t.jsx)("div",{className:"bp-sub",children:"Admin"})]})]}),(0,t.jsxs)("nav",{className:"bp-nav",children:[(0,t.jsx)("div",{className:"bp-group-title",children:"OVERVIEW"}),(0,t.jsx)("a",{className:"bp-nav-item "+(n("bp_dashboard")?"active":""),href:"admin.php?page=bp_dashboard",children:"Dashboard"}),(0,t.jsx)("a",{className:"bp-nav-item "+(n("bp_bookings")?"active":""),href:"admin.php?page=bp_bookings",children:"Bookings"}),(0,t.jsx)("a",{className:"bp-nav-item "+(n("bp_calendar")?"active":""),href:"admin.php?page=bp_calendar",children:"Calendar"}),(0,t.jsx)("a",{className:"bp-nav-item "+(n("bp_schedule")?"active":""),href:"admin.php?page=bp_schedule",children:"Schedule"}),(0,t.jsx)("a",{className:"bp-nav-item "+(n("bp_holidays")?"active":""),href:"admin.php?page=bp_holidays",children:"Holidays"}),(0,t.jsx)("div",{className:"bp-group-title",children:"RESOURCES"}),(0,t.jsxs)("div",{className:"bp-sidegroup",children:[(0,t.jsx)("a",{className:"bp-nav-item "+(["bp_services","bp_categories","bp_extras"].includes(d)?"active":""),href:"admin.php?page=bp_services",children:"Services"}),(0,t.jsxs)("div",{className:"bp-subnav",children:[(0,t.jsx)("a",{className:"bp-sub-item "+(n("bp_services")?"active":""),href:"admin.php?page=bp_services",children:"Services"}),(0,t.jsx)("a",{className:"bp-sub-item "+(n("bp_categories")?"active":""),href:"admin.php?page=bp_categories",children:"Categories"}),(0,t.jsx)("a",{className:"bp-sub-item "+(n("bp_extras")?"active":""),href:"admin.php?page=bp_extras",children:"Service Extras"})]})]}),(0,t.jsx)("a",{className:"bp-nav-item "+(n("bp_agents")?"active":""),href:"admin.php?page=bp_agents",children:"Agents"}),(0,t.jsx)("a",{className:"bp-nav-item "+(n("bp_customers")?"active":""),href:"admin.php?page=bp_customers",children:"Customers"}),(0,t.jsx)("a",{className:"bp-nav-item "+(n("bp_promo_codes")?"active":""),href:"admin.php?page=bp_promo_codes",children:"Promo Codes"}),(0,t.jsx)("a",{className:"bp-nav-item "+(n("bp-form-fields")?"active":""),href:"admin.php?page=bp-form-fields",children:"Form Fields"}),(0,t.jsx)("div",{className:"bp-group-title",children:"SYSTEM"}),(0,t.jsx)("a",{className:"bp-nav-item "+(n("bp_settings")?"active":""),href:"admin.php?page=bp_settings",children:"Settings"}),(0,t.jsx)("a",{className:"bp-nav-item "+(n("bp_audit")?"active":""),href:"admin.php?page=bp_audit",children:"Audit Log"}),(0,t.jsx)("a",{className:"bp-nav-item "+(n("bp_tools")?"active":""),href:"admin.php?page=bp_tools",children:"Tools"})]}),(0,t.jsx)("div",{className:"bp-sidebar-footer",children:(0,t.jsx)("a",{className:"bp-top-btn",href:"/wp-admin/index.php",children:"â† Back to WordPress"})})]}),(0,t.jsxs)("main",{className:"bp-main",children:[(0,t.jsxs)("header",{className:"bp-topbar",children:[(0,t.jsx)("div",{className:"bp-search",children:(0,t.jsx)("input",{placeholder:"Searchâ€¦"})}),(0,t.jsxs)("div",{className:"bp-top-actions",children:[(0,t.jsx)("button",{className:"bp-top-btn",onClick:s,children:"dark"===e?"â˜€ï¸ Light":"ðŸŒ™ Dark"}),(0,t.jsx)("div",{className:"bp-avatar",children:"W"})]})]}),(0,t.jsx)("div",{className:"bp-content",children:i})]})]})})}async function n(e,s={}){const a=(window.BP_ADMIN?.restUrl||"/wp-json/bp/v1").replace(/\/$/,"")+e,i={"Content-Type":"application/json",...s.headers||{}},t=window.BP_ADMIN?.nonce;t&&(i["X-WP-Nonce"]=t);const d="string"==typeof s.body?s.body:s.body?JSON.stringify(s.body):void 0,n=await fetch(a,{method:s.method||"GET",credentials:"same-origin",headers:i,body:d}),l=await n.json().catch(()=>({}));if(!n.ok||"error"===l?.status){const e=new Error(l?.message||"Request failed");throw e.status=n.status,e.payload=l,e}return l}function l({status:e}){const s=(e||"pending").toLowerCase();return(0,t.jsx)("span",{className:`bp-badge ${s}`,children:s})}function r(){const[e,s]=(0,a.useState)(!0),[i,d]=(0,a.useState)(""),[r,c]=(0,a.useState)({kpi:{bookings_today:0,upcoming_7d:0,pending:0,services:0,agents:0},recent:[],chart7:[]});return(0,a.useEffect)(()=>{!async function(){s(!0),d("");try{const e=await n("/admin/dashboard");c(e?.data||r)}catch(e){d(e.message||"Failed to load dashboard")}finally{s(!1)}}()},[]),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"bp-page-head",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"bp-h1",children:"Main Dashboard"}),(0,t.jsx)("div",{className:"bp-muted",children:"Overview of bookings, services, agents"})]}),(0,t.jsxs)("div",{className:"bp-head-actions",children:[(0,t.jsx)("a",{className:"bp-top-btn",href:"admin.php?page=bp-services",children:"+ Add Service"}),(0,t.jsx)("a",{className:"bp-top-btn",href:"admin.php?page=bp-agents",children:"+ Add Agent"}),(0,t.jsx)("button",{className:"bp-primary-btn",onClick:()=>alert("Next: open booking wizard"),children:"+ Create Booking"})]})]}),i?(0,t.jsx)("div",{className:"bp-error",children:i}):null,(0,t.jsxs)("div",{className:"bp-cards",children:[(0,t.jsxs)("div",{className:"bp-card",children:[(0,t.jsx)("div",{className:"bp-card-label",children:"Bookings Today"}),(0,t.jsx)("div",{className:"bp-card-value",children:e?"â€¦":r.kpi.bookings_today})]}),(0,t.jsxs)("div",{className:"bp-card",children:[(0,t.jsx)("div",{className:"bp-card-label",children:"Upcoming (7 days)"}),(0,t.jsx)("div",{className:"bp-card-value",children:e?"â€¦":r.kpi.upcoming_7d})]}),(0,t.jsxs)("div",{className:"bp-card",children:[(0,t.jsx)("div",{className:"bp-card-label",children:"Pending"}),(0,t.jsx)("div",{className:"bp-card-value",children:e?"â€¦":r.kpi.pending})]}),(0,t.jsxs)("div",{className:"bp-card",children:[(0,t.jsx)("div",{className:"bp-card-label",children:"Services"}),(0,t.jsx)("div",{className:"bp-card-value",children:e?"â€¦":r.kpi.services})]}),(0,t.jsxs)("div",{className:"bp-card",children:[(0,t.jsx)("div",{className:"bp-card-label",children:"Agents"}),(0,t.jsx)("div",{className:"bp-card-value",children:e?"â€¦":r.kpi.agents})]})]}),(0,t.jsxs)("div",{className:"bp-grid",style:{marginTop:14},children:[(0,t.jsxs)("div",{className:"bp-card bp-card-big",children:[(0,t.jsx)("div",{className:"bp-card-label",style:{marginBottom:10},children:"Bookings (last 7 days)"}),(0,t.jsxs)("div",{className:"bp-mini-chart",children:[(r.chart7||[]).map(e=>(0,t.jsxs)("div",{className:"bp-mini-bar",children:[(0,t.jsx)("div",{className:"bp-mini-bar-fill",style:{height:`${Math.min(100,18*e.count+10)}%`},title:`${e.day} â€¢ ${e.count} bookings`}),(0,t.jsx)("div",{className:"bp-mini-bar-label",children:e.day.slice(5)})]},e.day)),(!r.chart7||0===r.chart7.length)&&(0,t.jsx)("div",{className:"bp-muted",children:"No chart data yet."})]})]}),(0,t.jsxs)("div",{className:"bp-card",children:[(0,t.jsx)("div",{className:"bp-card-label",style:{marginBottom:10},children:"Quick Links"}),(0,t.jsxs)("div",{className:"bp-quick",children:[(0,t.jsx)("a",{className:"bp-quick-item",href:"admin.php?page=bp-bookings",children:"Manage bookings"}),(0,t.jsx)("a",{className:"bp-quick-item",href:"admin.php?page=bp-calendar",children:"Open calendar"}),(0,t.jsx)("a",{className:"bp-quick-item",href:"admin.php?page=bp-form-fields",children:"Edit form fields"}),(0,t.jsx)("a",{className:"bp-quick-item",href:"admin.php?page=bp-settings",children:"Settings"})]})]})]}),(0,t.jsxs)("div",{className:"bp-card",style:{marginTop:14},children:[(0,t.jsx)("div",{className:"bp-card-label",style:{marginBottom:10},children:"Recent Bookings"}),(0,t.jsxs)("div",{className:"bp-table",children:[(0,t.jsxs)("div",{className:"bp-tr bp-th",children:[(0,t.jsx)("div",{children:"ID"}),(0,t.jsx)("div",{children:"When"}),(0,t.jsx)("div",{children:"Service"}),(0,t.jsx)("div",{children:"Agent"}),(0,t.jsx)("div",{children:"Customer"}),(0,t.jsx)("div",{children:"Status"})]}),(r.recent||[]).map(e=>(0,t.jsxs)("a",{className:"bp-tr",href:`admin.php?page=bp-bookings&view=${e.id}`,children:[(0,t.jsxs)("div",{children:["#",e.id]}),(0,t.jsx)("div",{className:"bp-muted",children:e.start}),(0,t.jsx)("div",{children:e.service_name||"-"}),(0,t.jsx)("div",{children:e.agent_name||"-"}),(0,t.jsx)("div",{children:e.customer_name||"-"}),(0,t.jsx)("div",{children:(0,t.jsx)(l,{status:e.status})})]},e.id)),(!r.recent||0===r.recent.length)&&(0,t.jsx)("div",{className:"bp-muted",style:{padding:10},children:"No bookings yet."})]})]})]})}function c({status:e}){const s=(e||"pending").toLowerCase();return(0,t.jsx)("span",{className:`bp-badge ${s}`,children:s})}function o(){const[e,s]=(0,a.useState)(""),[i,d]=(0,a.useState)("all"),[l,r]=(0,a.useState)(1),[o]=(0,a.useState)(20),[p,h]=(0,a.useState)(!1),[b,m]=(0,a.useState)(""),[x,u]=(0,a.useState)([]),[g,v]=(0,a.useState)(0),[j,f]=(0,a.useState)(null);async function y(){h(!0),m("");try{const s=await n(`/admin/bookings?q=${encodeURIComponent(e)}&status=${i}&page=${l}&per=${o}`);u(s?.data?.items||[]),v(s?.data?.total||0)}catch(e){m(e.message||"Failed to load bookings")}finally{h(!1)}}(0,a.useEffect)(()=>{y()},[i,l]);const N=Math.max(1,Math.ceil(g/o));async function k(e,s){await async function(e,s={}){return n(e,{method:"POST",body:s})}(`/admin/bookings/${e}/status`,{status:s}),await y(),j&&j.id===e&&f({...j,status:s})}return(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"bp-page-head",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"bp-h1",children:"Bookings"}),(0,t.jsx)("div",{className:"bp-muted",children:"Search, filter, and manage appointments"})]})}),b?(0,t.jsx)("div",{className:"bp-error",children:b}):null,(0,t.jsx)("div",{className:"bp-card",style:{marginBottom:14},children:(0,t.jsxs)("form",{className:"bp-filters",onSubmit:function(e){e.preventDefault(),r(1),y()},children:[(0,t.jsx)("input",{className:"bp-input",placeholder:"Search customer, email, service, agentâ€¦",value:e,onChange:e=>s(e.target.value)}),(0,t.jsxs)("select",{className:"bp-input",value:i,onChange:e=>{d(e.target.value),r(1)},children:[(0,t.jsx)("option",{value:"all",children:"All statuses"}),(0,t.jsx)("option",{value:"pending",children:"Pending"}),(0,t.jsx)("option",{value:"confirmed",children:"Confirmed"}),(0,t.jsx)("option",{value:"cancelled",children:"Cancelled"})]}),(0,t.jsx)("button",{className:"bp-primary-btn",type:"submit",children:"Search"})]})}),(0,t.jsxs)("div",{className:"bp-card",children:[(0,t.jsxs)("div",{className:"bp-table",children:[(0,t.jsxs)("div",{className:"bp-tr bp-th",children:[(0,t.jsx)("div",{children:"ID"}),(0,t.jsx)("div",{children:"When"}),(0,t.jsx)("div",{children:"Service"}),(0,t.jsx)("div",{children:"Agent"}),(0,t.jsx)("div",{children:"Customer"}),(0,t.jsx)("div",{children:"Status"})]}),p?(0,t.jsx)("div",{className:"bp-muted",style:{padding:10},children:"Loadingâ€¦"}):null,!p&&x.map(e=>(0,t.jsxs)("button",{className:"bp-tr bp-tr-btn",onClick:()=>f(e),children:[(0,t.jsxs)("div",{children:["#",e.id]}),(0,t.jsx)("div",{className:"bp-muted",children:e.start_datetime}),(0,t.jsx)("div",{children:e.service_name||"-"}),(0,t.jsx)("div",{children:e.agent_name||"-"}),(0,t.jsx)("div",{children:e.customer_name||"-"}),(0,t.jsx)("div",{children:(0,t.jsx)(c,{status:e.status})})]},e.id)),p||0!==x.length?null:(0,t.jsx)("div",{className:"bp-muted",style:{padding:10},children:"No bookings found."})]}),(0,t.jsxs)("div",{className:"bp-pager",children:[(0,t.jsx)("button",{className:"bp-top-btn",disabled:l<=1,onClick:()=>r(e=>Math.max(1,e-1)),children:"Prev"}),(0,t.jsxs)("div",{className:"bp-muted",style:{fontWeight:1e3},children:["Page ",l," / ",N]}),(0,t.jsx)("button",{className:"bp-top-btn",disabled:l>=N,onClick:()=>r(e=>Math.min(N,e+1)),children:"Next"})]})]}),j?(0,t.jsx)("div",{className:"bp-drawer-wrap",onMouseDown:e=>{e.target.classList.contains("bp-drawer-wrap")&&f(null)},children:(0,t.jsxs)("div",{className:"bp-drawer",children:[(0,t.jsxs)("div",{className:"bp-drawer-head",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"bp-drawer-title",children:["Booking #",j.id]}),(0,t.jsxs)("div",{className:"bp-muted",children:[j.start_datetime," â†’ ",j.end_datetime]})]}),(0,t.jsx)("button",{className:"bp-top-btn",onClick:()=>f(null),children:"Close"})]}),(0,t.jsxs)("div",{className:"bp-drawer-body",children:[(0,t.jsxs)("div",{className:"bp-row",children:[(0,t.jsx)("div",{className:"bp-k",children:"Status"}),(0,t.jsx)("div",{className:"bp-v",children:(0,t.jsx)(c,{status:j.status})})]}),(0,t.jsxs)("div",{className:"bp-row",children:[(0,t.jsx)("div",{className:"bp-k",children:"Service"}),(0,t.jsx)("div",{className:"bp-v",children:j.service_name||"-"})]}),(0,t.jsxs)("div",{className:"bp-row",children:[(0,t.jsx)("div",{className:"bp-k",children:"Agent"}),(0,t.jsx)("div",{className:"bp-v",children:j.agent_name||"-"})]}),(0,t.jsxs)("div",{className:"bp-row",children:[(0,t.jsx)("div",{className:"bp-k",children:"Customer"}),(0,t.jsx)("div",{className:"bp-v",children:j.customer_name||"-"})]}),(0,t.jsxs)("div",{className:"bp-row",children:[(0,t.jsx)("div",{className:"bp-k",children:"Email"}),(0,t.jsx)("div",{className:"bp-v",children:j.customer_email||"-"})]}),(0,t.jsx)("div",{style:{height:12}}),(0,t.jsxs)("div",{className:"bp-drawer-actions",children:[(0,t.jsx)("button",{className:"bp-top-btn",onClick:()=>k(j.id,"confirmed"),children:"Confirm"}),(0,t.jsx)("button",{className:"bp-top-btn",onClick:()=>k(j.id,"cancelled"),children:"Cancel"}),(0,t.jsx)("button",{className:"bp-top-btn",onClick:()=>k(j.id,"pending"),children:"Set Pending"})]})]})]})}):null]})}const p=["text","email","tel","textarea","number","date","select","checkbox"],h=[{value:"details",label:"Details"},{value:"payment",label:"Payment"},{value:"summary",label:"Summary"}];function b(){const[e,s]=(0,a.useState)("customer"),[i,d]=(0,a.useState)([]),[l,r]=(0,a.useState)(""),[c,o]=(0,a.useState)(""),[b,x]=(0,a.useState)(!1),[u,g]=(0,a.useState)(!1),[v,j]=(0,a.useState)(null),[E,P]=(0,a.useState)(null),[D,I]=(0,a.useState)(!1),[q,F]=(0,a.useState)({field_key:"",label:"",type:"text",step_key:"details",placeholder:"",is_required:!1,is_enabled:!0,show_in_wizard:!0});async function M(){x(!0),r("");try{const s=await n(`/admin/form-fields?scope=${e}`);d(s?.data||[])}catch(e){d([]),r(e.message||"Failed to load")}finally{x(!1)}}return(0,a.useEffect)(()=>{M()},[e]),(0,t.jsxs)("div",{style:{padding:18},children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12,flexWrap:"wrap",marginBottom:20},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{style:{margin:"0 0 6px 0",fontSize:24,fontWeight:1e3},children:"Form Fields"}),(0,t.jsx)("p",{style:{margin:0,opacity:.7,fontSize:13},children:"Manage custom form fields for booking wizard"})]}),(0,t.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:[(0,t.jsx)("button",{onClick:()=>s("form"),style:B("form"===e),children:"ðŸ§© Form"}),(0,t.jsx)("button",{onClick:()=>s("customer"),style:B("customer"===e),children:"ðŸ‘¤ Customer"}),(0,t.jsx)("button",{onClick:()=>s("booking"),style:B("booking"===e),children:"ðŸ“… Booking"}),(0,t.jsx)("button",{onClick:async function(){if(confirm("Reseed all default fields (first_name, last_name, email, phone, notes)?")){r(""),o("");try{await n("/admin/form-fields/reseed",{method:"POST",body:{}}),o("Defaults reseeded!"),await M(),setTimeout(()=>o(""),3e3)}catch(e){r(e.message||"Reseed failed")}}},style:{...R,fontSize:12,padding:"8px 12px"},children:"ðŸ”„ Reseed Defaults"}),(0,t.jsx)("button",{onClick:()=>{j(null),F({field_key:"",label:"",type:"text",step_key:"details",placeholder:"",is_required:!1,is_enabled:!0,show_in_wizard:!0}),g(!0)},style:A,children:"+ Add Field"})]})]}),l&&(0,t.jsx)("div",{style:C,children:l}),c&&(0,t.jsx)("div",{style:z,children:c}),(0,t.jsxs)("div",{style:f,children:[b?(0,t.jsx)("div",{style:{padding:20,textAlign:"center",fontWeight:900},children:"â³ Loadingâ€¦"}):null,!b&&0===i.length&&(0,t.jsx)("div",{style:{padding:20,textAlign:"center",opacity:.7,fontWeight:900},children:"ðŸ“­ No fields yet. Add one to get started!"}),!b&&i.length>0&&(0,t.jsx)("div",{style:{overflowX:"auto"},children:(0,t.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",minWidth:900},children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{style:{background:"#f9fafb",borderBottom:"2px solid #e5e7eb"},children:[(0,t.jsx)("th",{style:y,children:"Key"}),(0,t.jsx)("th",{style:y,children:"Label"}),(0,t.jsx)("th",{style:y,children:"Type"}),(0,t.jsx)("th",{style:{...y,textAlign:"center"},children:"Step"}),(0,t.jsx)("th",{style:{...y,textAlign:"center"},children:"Required"}),(0,t.jsx)("th",{style:{...y,textAlign:"center"},children:"Wizard"}),(0,t.jsx)("th",{style:{...y,textAlign:"center"},children:"Enabled"}),(0,t.jsx)("th",{style:{...y,textAlign:"right"},children:"Actions"})]})}),(0,t.jsx)("tbody",{children:i.map(e=>(0,t.jsxs)("tr",{style:{borderBottom:"1px solid #f3f4f6",":hover":{background:"#fafbfc"}},children:[(0,t.jsx)("td",{style:N,children:(0,t.jsx)("code",{style:{background:"#f1f5f9",padding:"4px 8px",borderRadius:6,fontSize:12,fontWeight:900},children:e.field_key||e.name_key||""})}),(0,t.jsx)("td",{style:N,children:e.label}),(0,t.jsx)("td",{style:N,children:(0,t.jsx)("span",{style:{background:"#eef2ff",color:"#3730a3",padding:"4px 8px",borderRadius:6,fontSize:12,fontWeight:900},children:e.type})}),(0,t.jsx)("td",{style:{...N,textAlign:"center",fontSize:12},children:e.step_key}),(0,t.jsx)("td",{style:{...N,textAlign:"center"},children:Number(e.is_required)?"âœ…":"âŒ"}),(0,t.jsx)("td",{style:{...N,textAlign:"center"},children:Number(e.show_in_wizard)?"âœ…":"âŒ"}),(0,t.jsx)("td",{style:{...N,textAlign:"center"},children:Number(e.is_enabled)?"âœ…":"âŒ"}),(0,t.jsxs)("td",{style:{...N,textAlign:"right",whiteSpace:"nowrap"},children:[(0,t.jsx)("button",{onClick:()=>{return F({field_key:(s=e).field_key||s.name_key||"",label:s.label,type:s.type,step_key:s.step_key,placeholder:s.placeholder,is_required:Number(s.is_required),is_enabled:Number(s.is_enabled),show_in_wizard:Number(s.show_in_wizard)}),j(s.id),void g(!0);var s},style:T,disabled:E===e.id,children:"âœï¸ Edit"}),(0,t.jsxs)("button",{onClick:()=>async function(e){if(confirm("Delete this field?")){P(e),r("");try{await n(`/admin/form-fields/${e}`,{method:"DELETE"}),await M(),o("Field deleted!"),setTimeout(()=>o(""),3e3)}catch(e){r(e.message||"Delete failed")}finally{P(null)}}}(e.id),style:{...T,...W},disabled:E===e.id,children:[E===e.id?"â³":"ðŸ—‘ï¸"," Delete"]})]})]},e.id))})]})})]}),u&&(0,t.jsx)(m,{title:v?"Edit Field":"Create Field",onClose:()=>{g(!1),j(null)},onSave:async function(){I(!0),r(""),o("");try{const s={...q,scope:e};v?(await n(`/admin/form-fields/${v}`,{method:"PATCH",body:s}),o("Field updated!")):(await n("/admin/form-fields",{method:"POST",body:s}),o("Field created!")),g(!1),j(null),F({field_key:"",label:"",type:"text",step_key:"details",placeholder:"",is_required:!1,is_enabled:!0,show_in_wizard:!0}),await M(),setTimeout(()=>o(""),3e3)}catch(e){r(e.message||"Save failed")}finally{I(!1)}},submitting:D,children:(0,t.jsxs)("div",{style:{display:"grid",gap:16},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{style:S,children:"Field Key *"}),(0,t.jsx)("input",{type:"text",value:q.field_key,onChange:e=>F({...q,field_key:e.target.value}),placeholder:"e.g., company_name",style:k,disabled:null!==v&&!!q.field_key})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{style:S,children:"Label *"}),(0,t.jsx)("input",{type:"text",value:q.label,onChange:e=>F({...q,label:e.target.value}),placeholder:"Display name",style:k})]}),(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{style:S,children:"Type *"}),(0,t.jsx)("select",{value:q.type,onChange:e=>F({...q,type:e.target.value}),style:_,children:p.map(e=>(0,t.jsx)("option",{children:e},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{style:S,children:"Step"}),(0,t.jsx)("select",{value:q.step_key,onChange:e=>F({...q,step_key:e.target.value}),style:_,children:h.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{style:S,children:"Placeholder"}),(0,t.jsx)("input",{type:"text",value:q.placeholder,onChange:e=>F({...q,placeholder:e.target.value}),placeholder:"Optional placeholder text",style:k})]}),(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[(0,t.jsxs)("label",{style:w,children:[(0,t.jsx)("input",{type:"checkbox",checked:q.is_required,onChange:e=>F({...q,is_required:e.target.checked})})," Required"]}),(0,t.jsxs)("label",{style:w,children:[(0,t.jsx)("input",{type:"checkbox",checked:q.is_enabled,onChange:e=>F({...q,is_enabled:e.target.checked})})," Enabled"]})]}),(0,t.jsxs)("label",{style:w,children:[(0,t.jsx)("input",{type:"checkbox",checked:q.show_in_wizard,onChange:e=>F({...q,show_in_wizard:e.target.checked})})," Show in Wizard"]})]})})]})}function m({title:e,onClose:s,onSave:a,submitting:i,children:d}){return(0,t.jsx)("div",{style:x,onClick:s,children:(0,t.jsxs)("div",{style:u,onClick:e=>e.stopPropagation(),children:[(0,t.jsxs)("div",{style:g,children:[(0,t.jsx)("h2",{style:{margin:0,fontSize:18,fontWeight:1e3},children:e}),(0,t.jsx)("button",{onClick:s,style:E,disabled:i,children:"âœ•"})]}),(0,t.jsx)("div",{style:v,children:d}),(0,t.jsxs)("div",{style:j,children:[(0,t.jsx)("button",{onClick:s,style:R,disabled:i,children:"Cancel"}),(0,t.jsx)("button",{onClick:a,style:A,disabled:i,children:i?"â³ Savingâ€¦":"ðŸ’¾ Save"})]})]})})}const x={position:"fixed",inset:0,background:"rgba(0,0,0,.3)",zIndex:999998,display:"flex",alignItems:"center",justifyContent:"center"},u={width:"min(600px, calc(100% - 24px))",background:"#fff",borderRadius:18,border:"1px solid #e5e7eb",boxShadow:"0 20px 60px rgba(0,0,0,.25)"},g={padding:20,borderBottom:"1px solid #f3f4f6",display:"flex",justifyContent:"space-between",alignItems:"center"},v={padding:20,maxHeight:"60vh",overflowY:"auto"},j={padding:20,borderTop:"1px solid #f3f4f6",display:"flex",justifyContent:"flex-end",gap:10},f={background:"#fff",border:"1px solid #e5e7eb",borderRadius:18,padding:0,overflow:"hidden"},y={textAlign:"left",padding:"14px 16px",fontWeight:1e3,fontSize:13,background:"#f9fafb",borderBottom:"2px solid #e5e7eb"},N={padding:"14px 16px",verticalAlign:"middle",fontSize:14},k={width:"100%",padding:"10px 12px",borderRadius:10,border:"1px solid #e5e7eb",fontFamily:"inherit",fontWeight:900,fontSize:14,boxSizing:"border-box"},_={width:"100%",padding:"10px 12px",borderRadius:10,border:"1px solid #e5e7eb",fontFamily:"inherit",fontWeight:900,fontSize:14,background:"#fff",boxSizing:"border-box"},S={fontWeight:950,display:"block",marginBottom:8,fontSize:14},w={display:"flex",alignItems:"center",gap:8,fontWeight:900,fontSize:14},C={background:"#fef2f2",border:"1px solid #fecaca",color:"#991b1b",padding:14,borderRadius:12,fontWeight:900,marginBottom:16,fontSize:14},z={background:"#f0fdf4",border:"1px solid #86efac",color:"#166534",padding:14,borderRadius:12,fontWeight:900,marginBottom:16,fontSize:14},A={padding:"10px 16px",borderRadius:10,border:"none",background:"#4318ff",color:"#fff",fontWeight:900,cursor:"pointer",fontSize:14,transition:"all 0.2s",":hover":{background:"#3010e0"}},R={padding:"10px 16px",borderRadius:10,border:"1px solid #e5e7eb",background:"#fff",color:"#111",fontWeight:900,cursor:"pointer",fontSize:14,transition:"all 0.2s"},W={color:"#dc2626",":hover":{background:"#fef2f2"}},B=e=>({padding:"10px 14px",borderRadius:10,border:"1px solid "+(e?"#4318ff":"#e5e7eb"),background:e?"#f0f4ff":"#fff",color:e?"#4318ff":"#111",fontWeight:900,cursor:"pointer",fontSize:14}),T={padding:"6px 10px",borderRadius:8,border:"1px solid #e5e7eb",background:"#fff",color:"#111",fontWeight:900,cursor:"pointer",fontSize:12,marginRight:6},E={background:"none",border:"none",fontSize:20,cursor:"pointer",fontWeight:900,opacity:.7,":hover":{opacity:1}};function P(){const e=window.BP_ADMIN?.page||"bp_dashboard",s=(0,a.useMemo)(()=>function(e){switch(e){case"bp_dashboard":default:return"dashboard";case"bp-bookings":case"bp_bookings":return"bookings";case"bp-calendar":case"bp_calendar":return"calendar";case"bp-schedule":case"bp_schedule":return"schedule";case"bp-holidays":case"bp_holidays":return"holidays";case"bp-services":case"bp_services":return"services";case"bp-categories":case"bp_categories":return"categories";case"bp-extras":case"bp_extras":return"extras";case"bp-promo-codes":case"bp_promo_codes":return"promo";case"bp-form-fields":return"form-fields";case"bp-customers":case"bp_customers":return"customers";case"bp-agents":case"bp_agents":return"agents";case"bp-settings":case"bp_settings":return"settings";case"bp-audit-log":case"bp_audit":return"audit";case"bp-tools":case"bp_tools":return"tools"}}(e),[e]),[i,n]=(0,a.useState)("light");return(0,a.useEffect)(()=>{const e="dark"===localStorage.getItem("bp_theme")?"dark":"light";n(e),document.documentElement.classList.toggle("bp-dark","dark"===e)},[]),(0,t.jsxs)(d,{theme:i,onToggleTheme:function(){const e="dark"===i?"light":"dark";n(e),localStorage.setItem("bp_theme",e),document.documentElement.classList.toggle("bp-dark","dark"===e)},active:s,children:["dashboard"===s?(0,t.jsx)(r,{}):null,"bookings"===s?(0,t.jsx)(o,{}):null,"form-fields"===s?(0,t.jsx)(b,{}):null,["calendar","schedule","holidays","services","categories","extras","promo","customers","agents","settings","audit","tools"].includes(s)?(0,t.jsx)(D,{title:s}):null]})}function D({title:e}){return(0,t.jsxs)("div",{className:"bp-card",children:[(0,t.jsx)("div",{className:"bp-card-label",children:"Page"}),(0,t.jsxs)("div",{className:"bp-card-value",style:{fontSize:18,marginTop:6},children:[e," (UI shell active âœ…)"]}),(0,t.jsx)("div",{className:"bp-muted",style:{marginTop:8},children:"Next: we design and connect this page with Horizon UI layout."})]})}document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("bp-admin-app");e&&(0,i.H)(e).render((0,t.jsx)(P,{}))})})();