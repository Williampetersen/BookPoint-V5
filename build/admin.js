(()=>{"use strict";var e={338(e,t,i){var l=i(795);t.H=l.createRoot,l.hydrateRoot},795(e){e.exports=window.ReactDOM}},t={};const i=window.React;var l=function i(l){var d=t[l];if(void 0!==d)return d.exports;var n=t[l]={exports:{}};return e[l](n,n.exports,i),n.exports}(338);async function d(e,t={}){const i=(window.BP_ADMIN?.restUrl||"/wp-json/bp/v1").replace(/\/$/,"")+e,l={"Content-Type":"application/json",...t.headers||{}},d=window.BP_ADMIN?.nonce;d&&(l["X-WP-Nonce"]=d);const n="string"==typeof t.body?t.body:t.body?JSON.stringify(t.body):void 0,s=await fetch(i,{method:t.method||"GET",credentials:"same-origin",headers:l,body:n}),r=await s.json().catch(()=>({}));if(!s.ok||"error"===r?.status){const e=new Error(r?.message||"Request failed");throw e.status=s.status,e.payload=r,e}return r}const n=window.ReactJSXRuntime,s=["text","email","tel","textarea","number","date","select","checkbox"],r=[{value:"details",label:"Details"},{value:"payment",label:"Payment"},{value:"summary",label:"Summary"}];function o(){const[e,t]=(0,i.useState)("customer"),[l,o]=(0,i.useState)([]),[c,p]=(0,i.useState)(""),[h,f]=(0,i.useState)(""),[x,S]=(0,i.useState)(!1),[R,A]=(0,i.useState)(!1),[B,E]=(0,i.useState)(null),[F,N]=(0,i.useState)(null),[T,q]=(0,i.useState)(!1),[D,I]=(0,i.useState)({field_key:"",label:"",type:"text",step_key:"details",placeholder:"",is_required:!1,is_enabled:!0,show_in_wizard:!0});async function P(){S(!0),p("");try{const t=await d(`/admin/form-fields?scope=${e}`);o(t?.data||[])}catch(e){o([]),p(e.message||"Failed to load")}finally{S(!1)}}return(0,i.useEffect)(()=>{P()},[e]),(0,n.jsxs)("div",{style:{padding:18},children:[(0,n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:12,flexWrap:"wrap",marginBottom:20},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{style:{margin:"0 0 6px 0",fontSize:24,fontWeight:1e3},children:"Form Fields"}),(0,n.jsx)("p",{style:{margin:0,opacity:.7,fontSize:13},children:"Manage custom form fields for booking wizard"})]}),(0,n.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center",flexWrap:"wrap"},children:[(0,n.jsx)("button",{onClick:()=>t("customer"),style:C("customer"===e),children:"ðŸ‘¤ Customer"}),(0,n.jsx)("button",{onClick:()=>t("booking"),style:C("booking"===e),children:"ðŸ“… Booking"}),(0,n.jsx)("button",{onClick:()=>{E(null),I({field_key:"",label:"",type:"text",step_key:"details",placeholder:"",is_required:!1,is_enabled:!0,show_in_wizard:!0}),A(!0)},style:_,children:"+ Add Field"})]})]}),c&&(0,n.jsx)("div",{style:k,children:c}),h&&(0,n.jsx)("div",{style:w,children:h}),(0,n.jsxs)("div",{style:y,children:[x?(0,n.jsx)("div",{style:{padding:20,textAlign:"center",fontWeight:900},children:"â³ Loadingâ€¦"}):null,!x&&0===l.length&&(0,n.jsx)("div",{style:{padding:20,textAlign:"center",opacity:.7,fontWeight:900},children:"ðŸ“­ No fields yet. Add one to get started!"}),!x&&l.length>0&&(0,n.jsx)("div",{style:{overflowX:"auto"},children:(0,n.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",minWidth:900},children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{style:{background:"#f9fafb",borderBottom:"2px solid #e5e7eb"},children:[(0,n.jsx)("th",{style:b,children:"Key"}),(0,n.jsx)("th",{style:b,children:"Label"}),(0,n.jsx)("th",{style:b,children:"Type"}),(0,n.jsx)("th",{style:b,style:{textAlign:"center"},children:"Step"}),(0,n.jsx)("th",{style:b,style:{textAlign:"center"},children:"Required"}),(0,n.jsx)("th",{style:b,style:{textAlign:"center"},children:"Wizard"}),(0,n.jsx)("th",{style:b,style:{textAlign:"center"},children:"Enabled"}),(0,n.jsx)("th",{style:{...b,textAlign:"right"},children:"Actions"})]})}),(0,n.jsx)("tbody",{children:l.map(e=>(0,n.jsxs)("tr",{style:{borderBottom:"1px solid #f3f4f6",":hover":{background:"#fafbfc"}},children:[(0,n.jsx)("td",{style:g,children:(0,n.jsx)("code",{style:{background:"#f1f5f9",padding:"4px 8px",borderRadius:6,fontSize:12,fontWeight:900},children:e.field_key})}),(0,n.jsx)("td",{style:g,children:e.label}),(0,n.jsx)("td",{style:g,children:(0,n.jsx)("span",{style:{background:"#eef2ff",color:"#3730a3",padding:"4px 8px",borderRadius:6,fontSize:12,fontWeight:900},children:e.type})}),(0,n.jsx)("td",{style:{...g,textAlign:"center",fontSize:12},children:e.step_key}),(0,n.jsx)("td",{style:{...g,textAlign:"center"},children:Number(e.is_required)?"âœ…":"âŒ"}),(0,n.jsx)("td",{style:{...g,textAlign:"center"},children:Number(e.show_in_wizard)?"âœ…":"âŒ"}),(0,n.jsx)("td",{style:{...g,textAlign:"center"},children:Number(e.is_enabled)?"âœ…":"âŒ"}),(0,n.jsxs)("td",{style:{...g,textAlign:"right",whiteSpace:"nowrap"},children:[(0,n.jsx)("button",{onClick:()=>{return I({field_key:(t=e).field_key,label:t.label,type:t.type,step_key:t.step_key,placeholder:t.placeholder,is_required:Number(t.is_required),is_enabled:Number(t.is_enabled),show_in_wizard:Number(t.show_in_wizard)}),E(t.id),void A(!0);var t},style:W,disabled:F===e.id,children:"âœï¸ Edit"}),(0,n.jsxs)("button",{onClick:()=>async function(e){if(confirm("Delete this field?")){N(e),p("");try{await d(`/admin/form-fields/${e}`,{method:"DELETE"}),await P(),f("Field deleted!"),setTimeout(()=>f(""),3e3)}catch(e){p(e.message||"Delete failed")}finally{N(null)}}}(e.id),style:{...W,...z},disabled:F===e.id,children:[F===e.id?"â³":"ðŸ—‘ï¸"," Delete"]})]})]},e.id))})]})})]}),R&&(0,n.jsx)(a,{title:B?"Edit Field":"Create Field",onClose:()=>{A(!1),E(null)},onSave:async function(){q(!0),p(""),f("");try{const t={...D,scope:e};B?(await d(`/admin/form-fields/${B}`,{method:"PATCH",body:t}),f("Field updated!")):(await d("/admin/form-fields",{method:"POST",body:t}),f("Field created!")),A(!1),E(null),I({field_key:"",label:"",type:"text",step_key:"details",placeholder:"",is_required:!1,is_enabled:!0,show_in_wizard:!0}),await P(),setTimeout(()=>f(""),3e3)}catch(e){p(e.message||"Save failed")}finally{q(!1)}},submitting:T,children:(0,n.jsxs)("div",{style:{display:"grid",gap:16},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{style:j,children:"Field Key *"}),(0,n.jsx)("input",{type:"text",value:D.field_key,onChange:e=>I({...D,field_key:e.target.value}),placeholder:"e.g., company_name",style:u,disabled:null!==B})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{style:j,children:"Label *"}),(0,n.jsx)("input",{type:"text",value:D.label,onChange:e=>I({...D,label:e.target.value}),placeholder:"Display name",style:u})]}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{style:j,children:"Type *"}),(0,n.jsx)("select",{value:D.type,onChange:e=>I({...D,type:e.target.value}),style:m,children:s.map(e=>(0,n.jsx)("option",{children:e},e))})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{style:j,children:"Step"}),(0,n.jsx)("select",{value:D.step_key,onChange:e=>I({...D,step_key:e.target.value}),style:m,children:r.map(e=>(0,n.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{style:j,children:"Placeholder"}),(0,n.jsx)("input",{type:"text",value:D.placeholder,onChange:e=>I({...D,placeholder:e.target.value}),placeholder:"Optional placeholder text",style:u})]}),(0,n.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[(0,n.jsxs)("label",{style:v,children:[(0,n.jsx)("input",{type:"checkbox",checked:D.is_required,onChange:e=>I({...D,is_required:e.target.checked})})," Required"]}),(0,n.jsxs)("label",{style:v,children:[(0,n.jsx)("input",{type:"checkbox",checked:D.is_enabled,onChange:e=>I({...D,is_enabled:e.target.checked})})," Enabled"]})]}),(0,n.jsxs)("label",{style:v,children:[(0,n.jsx)("input",{type:"checkbox",checked:D.show_in_wizard,onChange:e=>I({...D,show_in_wizard:e.target.checked})})," Show in Wizard"]})]})})]})}function a({title:e,onClose:t,onSave:i,submitting:l,children:d}){return(0,n.jsx)("div",{style:c,onClick:t,children:(0,n.jsxs)("div",{style:p,onClick:e=>e.stopPropagation(),children:[(0,n.jsxs)("div",{style:h,children:[(0,n.jsx)("h2",{style:{margin:0,fontSize:18,fontWeight:1e3},children:e}),(0,n.jsx)("button",{onClick:t,style:R,disabled:l,children:"âœ•"})]}),(0,n.jsx)("div",{style:f,children:d}),(0,n.jsxs)("div",{style:x,children:[(0,n.jsx)("button",{onClick:t,style:S,disabled:l,children:"Cancel"}),(0,n.jsx)("button",{onClick:i,style:_,disabled:l,children:l?"â³ Savingâ€¦":"ðŸ’¾ Save"})]})]})})}const c={position:"fixed",inset:0,background:"rgba(0,0,0,.3)",zIndex:999998,display:"flex",alignItems:"center",justifyContent:"center"},p={width:"min(600px, calc(100% - 24px))",background:"#fff",borderRadius:18,border:"1px solid #e5e7eb",boxShadow:"0 20px 60px rgba(0,0,0,.25)"},h={padding:20,borderBottom:"1px solid #f3f4f6",display:"flex",justifyContent:"space-between",alignItems:"center"},f={padding:20,maxHeight:"60vh",overflowY:"auto"},x={padding:20,borderTop:"1px solid #f3f4f6",display:"flex",justifyContent:"flex-end",gap:10},y={background:"#fff",border:"1px solid #e5e7eb",borderRadius:18,padding:0,overflow:"hidden"},b={textAlign:"left",padding:"14px 16px",fontWeight:1e3,fontSize:13,background:"#f9fafb",borderBottom:"2px solid #e5e7eb"},g={padding:"14px 16px",verticalAlign:"middle",fontSize:14},u={width:"100%",padding:"10px 12px",borderRadius:10,border:"1px solid #e5e7eb",fontFamily:"inherit",fontWeight:900,fontSize:14,boxSizing:"border-box"},m={width:"100%",padding:"10px 12px",borderRadius:10,border:"1px solid #e5e7eb",fontFamily:"inherit",fontWeight:900,fontSize:14,background:"#fff",boxSizing:"border-box"},j={fontWeight:950,display:"block",marginBottom:8,fontSize:14},v={display:"flex",alignItems:"center",gap:8,fontWeight:900,fontSize:14},k={background:"#fef2f2",border:"1px solid #fecaca",color:"#991b1b",padding:14,borderRadius:12,fontWeight:900,marginBottom:16,fontSize:14},w={background:"#f0fdf4",border:"1px solid #86efac",color:"#166534",padding:14,borderRadius:12,fontWeight:900,marginBottom:16,fontSize:14},_={padding:"10px 16px",borderRadius:10,border:"none",background:"#4318ff",color:"#fff",fontWeight:900,cursor:"pointer",fontSize:14,transition:"all 0.2s",":hover":{background:"#3010e0"}},S={padding:"10px 16px",borderRadius:10,border:"1px solid #e5e7eb",background:"#fff",color:"#111",fontWeight:900,cursor:"pointer",fontSize:14,transition:"all 0.2s"},z={color:"#dc2626",":hover":{background:"#fef2f2"}},C=e=>({padding:"10px 14px",borderRadius:10,border:"1px solid "+(e?"#4318ff":"#e5e7eb"),background:e?"#f0f4ff":"#fff",color:e?"#4318ff":"#111",fontWeight:900,cursor:"pointer",fontSize:14}),W={padding:"6px 10px",borderRadius:8,border:"1px solid #e5e7eb",background:"#fff",color:"#111",fontWeight:900,cursor:"pointer",fontSize:12,marginRight:6},R={background:"none",border:"none",fontSize:20,cursor:"pointer",fontWeight:900,opacity:.7,":hover":{opacity:1}};function A(){const e=window.BP_ADMIN?.page||"bp";return"bp-form-fields"===e?(0,n.jsx)(o,{}):(0,n.jsxs)("div",{style:{padding:18,fontWeight:900},children:["BookPoint admin page: ",e]})}document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("bp-admin-app");e&&(0,l.H)(e).render((0,n.jsx)(A,{}))})})();