(()=>{"use strict";var e={338(e,a,s){var i=s(795);a.H=i.createRoot,i.hydrateRoot},795(e){e.exports=window.ReactDOM}},a={};function s(i){var n=a[i];if(void 0!==n)return n.exports;var t=a[i]={exports:{}};return e[i](t,t.exports,s),t.exports}s.n=e=>{var a=e&&e.__esModule?()=>e.default:()=>e;return s.d(a,{a}),a},s.d=(e,a)=>{for(var i in a)s.o(a,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:a[i]})},s.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a);const i=window.React;var n=s.n(i),t=s(338);const l=window.ReactJSXRuntime;function c({theme:e,onToggleTheme:a,active:s,children:i}){const n=window.BP_ADMIN?.page||"bp_dashboard",t=e=>n===e;return(0,l.jsx)("div",{className:"bp-app",children:(0,l.jsxs)("div",{className:"bp-shell",children:[(0,l.jsxs)("aside",{className:"bp-sidebar",children:[(0,l.jsxs)("div",{className:"bp-brand",children:[(0,l.jsx)("div",{className:"bp-logo",children:"BP"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"bp-title",children:"BookPoint"}),(0,l.jsx)("div",{className:"bp-sub",children:"Admin"})]})]}),(0,l.jsxs)("nav",{className:"bp-nav",children:[(0,l.jsx)("div",{className:"bp-group-title",children:"OVERVIEW"}),(0,l.jsx)("a",{className:"bp-nav-item "+(t("bp_dashboard")?"active":""),href:"admin.php?page=bp_dashboard",children:"Dashboard"}),(0,l.jsx)("a",{className:"bp-nav-item "+(t("bp_bookings")?"active":""),href:"admin.php?page=bp_bookings",children:"Bookings"}),(0,l.jsx)("a",{className:"bp-nav-item "+(t("bp_calendar")?"active":""),href:"admin.php?page=bp_calendar",children:"Calendar"}),(0,l.jsx)("a",{className:"bp-nav-item "+(t("bp_schedule")?"active":""),href:"admin.php?page=bp_schedule",children:"Schedule"}),(0,l.jsx)("a",{className:"bp-nav-item "+(t("bp_holidays")?"active":""),href:"admin.php?page=bp_holidays",children:"Holidays"}),(0,l.jsx)("div",{className:"bp-group-title",children:"RESOURCES"}),(0,l.jsx)("div",{className:"bp-sidegroup",children:(0,l.jsxs)("div",{className:"bp-subnav",children:[(0,l.jsx)("a",{className:"bp-sub-item "+(t("bp_services")?"active":""),href:"admin.php?page=bp_services",children:"Services"}),(0,l.jsx)("a",{className:"bp-sub-item "+(t("bp_categories")?"active":""),href:"admin.php?page=bp_categories",children:"Categories"}),(0,l.jsx)("a",{className:"bp-sub-item "+(t("bp_extras")?"active":""),href:"admin.php?page=bp_extras",children:"Service Extras"})]})}),(0,l.jsx)("a",{className:"bp-nav-item "+(t("bp_agents")?"active":""),href:"admin.php?page=bp_agents",children:"Agents"}),(0,l.jsx)("a",{className:"bp-nav-item "+(t("bp_customers")?"active":""),href:"admin.php?page=bp_customers",children:"Customers"}),(0,l.jsx)("a",{className:"bp-nav-item "+(t("bp_promo_codes")?"active":""),href:"admin.php?page=bp_promo_codes",children:"Promo Codes"}),(0,l.jsx)("a",{className:"bp-nav-item "+(t("bp-form-fields")?"active":""),href:"admin.php?page=bp-form-fields",children:"Form Fields"}),(0,l.jsx)("div",{className:"bp-group-title",children:"SYSTEM"}),(0,l.jsx)("a",{className:"bp-nav-item "+(t("bp_settings")?"active":""),href:"admin.php?page=bp_settings",children:"Settings"}),(0,l.jsx)("a",{className:"bp-nav-item "+(t("bp_notifications")?"active":""),href:"admin.php?page=bp_notifications",children:"Notifications"}),(0,l.jsx)("a",{className:"bp-nav-item "+(t("bp_audit")?"active":""),href:"admin.php?page=bp_audit",children:"Audit Log"}),(0,l.jsx)("a",{className:"bp-nav-item "+(t("bp_tools")?"active":""),href:"admin.php?page=bp_tools",children:"Tools"})]}),(0,l.jsx)("div",{className:"bp-sidebar-footer",children:(0,l.jsx)("a",{className:"bp-top-btn",href:"/wp-admin/index.php",children:"â† Back to WordPress"})})]}),(0,l.jsxs)("main",{className:"bp-main",children:[(0,l.jsxs)("header",{className:"bp-topbar",children:[(0,l.jsx)("div",{className:"bp-search",children:(0,l.jsx)("input",{placeholder:"Searchâ€¦"})}),(0,l.jsxs)("div",{className:"bp-top-actions",children:[(0,l.jsx)("button",{className:"bp-top-btn",onClick:a,children:"dark"===e?"â˜€ï¸ Light":"ðŸŒ™ Dark"}),(0,l.jsx)("div",{className:"bp-avatar",children:"W"})]})]}),(0,l.jsx)("div",{className:"bp-content",children:i})]})]})})}async function d(e,a={}){const s=(window.BP_ADMIN?.restUrl||"/wp-json/bp/v1").replace(/\/$/,"")+e,i={"Content-Type":"application/json",...a.headers||{}},n=window.BP_ADMIN?.nonce;n&&(i["X-WP-Nonce"]=n);const t="string"==typeof a.body?a.body:a.body?JSON.stringify(a.body):void 0,l=await fetch(s,{method:a.method||"GET",credentials:"same-origin",headers:i,body:t}),c=await l.json().catch(()=>({}));if(!l.ok||"error"===c?.status){const e=new Error(c?.message||"Request failed");throw e.status=l.status,e.payload=c,e}return c}function r({status:e}){const a=(e||"pending").toLowerCase();return(0,l.jsx)("span",{className:`bp-badge ${a}`,children:a})}function o(){const[e,a]=(0,i.useState)(!0),[s,n]=(0,i.useState)(""),[t,c]=(0,i.useState)({kpi:{bookings_today:0,upcoming_7d:0,pending:0,services:0,agents:0},recent:[],chart7:[]});return(0,i.useEffect)(()=>{!async function(){a(!0),n("");try{const e=await d("/admin/dashboard");c(e?.data||t)}catch(e){n(e.message||"Failed to load dashboard")}finally{a(!1)}}()},[]),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"bp-page-head",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"bp-h1",children:"Main Dashboard"}),(0,l.jsx)("div",{className:"bp-muted",children:"Overview of bookings, services, agents"})]}),(0,l.jsxs)("div",{className:"bp-head-actions",children:[(0,l.jsx)("a",{className:"bp-top-btn",href:"admin.php?page=bp-services",children:"+ Add Service"}),(0,l.jsx)("a",{className:"bp-top-btn",href:"admin.php?page=bp-agents",children:"+ Add Agent"}),(0,l.jsx)("button",{className:"bp-primary-btn",onClick:()=>alert("Next: open booking wizard"),children:"+ Create Booking"})]})]}),s?(0,l.jsx)("div",{className:"bp-error",children:s}):null,(0,l.jsxs)("div",{className:"bp-cards",children:[(0,l.jsxs)("div",{className:"bp-card",children:[(0,l.jsx)("div",{className:"bp-card-label",children:"Bookings Today"}),(0,l.jsx)("div",{className:"bp-card-value",children:e?"â€¦":t.kpi.bookings_today})]}),(0,l.jsxs)("div",{className:"bp-card",children:[(0,l.jsx)("div",{className:"bp-card-label",children:"Upcoming (7 days)"}),(0,l.jsx)("div",{className:"bp-card-value",children:e?"â€¦":t.kpi.upcoming_7d})]}),(0,l.jsxs)("div",{className:"bp-card",children:[(0,l.jsx)("div",{className:"bp-card-label",children:"Pending"}),(0,l.jsx)("div",{className:"bp-card-value",children:e?"â€¦":t.kpi.pending})]}),(0,l.jsxs)("div",{className:"bp-card",children:[(0,l.jsx)("div",{className:"bp-card-label",children:"Services"}),(0,l.jsx)("div",{className:"bp-card-value",children:e?"â€¦":t.kpi.services})]}),(0,l.jsxs)("div",{className:"bp-card",children:[(0,l.jsx)("div",{className:"bp-card-label",children:"Agents"}),(0,l.jsx)("div",{className:"bp-card-value",children:e?"â€¦":t.kpi.agents})]})]}),(0,l.jsxs)("div",{className:"bp-grid",style:{marginTop:14},children:[(0,l.jsxs)("div",{className:"bp-card bp-card-big",children:[(0,l.jsx)("div",{className:"bp-card-label",style:{marginBottom:10},children:"Bookings (last 7 days)"}),(0,l.jsxs)("div",{className:"bp-mini-chart",children:[(t.chart7||[]).map(e=>(0,l.jsxs)("div",{className:"bp-mini-bar",children:[(0,l.jsx)("div",{className:"bp-mini-bar-fill",style:{height:`${Math.min(100,18*e.count+10)}%`},title:`${e.day} â€¢ ${e.count} bookings`}),(0,l.jsx)("div",{className:"bp-mini-bar-label",children:e.day.slice(5)})]},e.day)),(!t.chart7||0===t.chart7.length)&&(0,l.jsx)("div",{className:"bp-muted",children:"No chart data yet."})]})]}),(0,l.jsxs)("div",{className:"bp-card",children:[(0,l.jsx)("div",{className:"bp-card-label",style:{marginBottom:10},children:"Quick Links"}),(0,l.jsxs)("div",{className:"bp-quick",children:[(0,l.jsx)("a",{className:"bp-quick-item",href:"admin.php?page=bp-bookings",children:"Manage bookings"}),(0,l.jsx)("a",{className:"bp-quick-item",href:"admin.php?page=bp-calendar",children:"Open calendar"}),(0,l.jsx)("a",{className:"bp-quick-item",href:"admin.php?page=bp-form-fields",children:"Edit form fields"}),(0,l.jsx)("a",{className:"bp-quick-item",href:"admin.php?page=bp-settings",children:"Settings"})]})]})]}),(0,l.jsxs)("div",{className:"bp-card",style:{marginTop:14},children:[(0,l.jsx)("div",{className:"bp-card-label",style:{marginBottom:10},children:"Recent Bookings"}),(0,l.jsxs)("div",{className:"bp-table",children:[(0,l.jsxs)("div",{className:"bp-tr bp-th",children:[(0,l.jsx)("div",{children:"ID"}),(0,l.jsx)("div",{children:"When"}),(0,l.jsx)("div",{children:"Service"}),(0,l.jsx)("div",{children:"Agent"}),(0,l.jsx)("div",{children:"Customer"}),(0,l.jsx)("div",{children:"Status"})]}),(t.recent||[]).map(e=>(0,l.jsxs)("a",{className:"bp-tr",href:`admin.php?page=bp-bookings&view=${e.id}`,children:[(0,l.jsxs)("div",{children:["#",e.id]}),(0,l.jsx)("div",{className:"bp-muted",children:e.start}),(0,l.jsx)("div",{children:e.service_name||"-"}),(0,l.jsx)("div",{children:e.agent_name||"-"}),(0,l.jsx)("div",{children:e.customer_name||"-"}),(0,l.jsx)("div",{children:(0,l.jsx)(r,{status:e.status})})]},e.id)),(!t.recent||0===t.recent.length)&&(0,l.jsx)("div",{className:"bp-muted",style:{padding:10},children:"No bookings yet."})]})]})]})}function m({status:e}){const a=(e||"pending").toLowerCase();return(0,l.jsx)("span",{className:`bp-badge ${a}`,children:a})}function p(){const[e,a]=(0,i.useState)(""),[s,n]=(0,i.useState)("all"),[t,c]=(0,i.useState)("desc"),[r,o]=(0,i.useState)(""),[p,b]=(0,i.useState)(""),[j,g]=(0,i.useState)(1),[N]=(0,i.useState)(20),[f,y]=(0,i.useState)(!1),[_,k]=(0,i.useState)(""),[w,S]=(0,i.useState)([]),[C,B]=(0,i.useState)(0),[D,A]=(0,i.useState)({total:0,pending:0,confirmed:0,cancelled:0}),[P,T]=(0,i.useState)(null),[$,R]=(0,i.useState)(!1),[L,M]=(0,i.useState)("");async function I(){y(!0),k("");try{const a=`/admin/bookings?q=${encodeURIComponent(e)}&status=${encodeURIComponent(s)}&sort=${encodeURIComponent(t)}&date_from=${encodeURIComponent(r)}&date_to=${encodeURIComponent(p)}&page=${j}&per=${N}`,i=await d(a),n=[...i?.data?.items||[]].sort((e,a)=>(Number(a.id)||0)-(Number(e.id)||0));S(n),B(i?.data?.total||0);const l={total:i?.data?.total||0,pending:0,confirmed:0,cancelled:0};for(const e of n){const a=(e.status||"pending").toLowerCase();"pending"===a&&l.pending++,"confirmed"===a&&l.confirmed++,"cancelled"===a&&l.cancelled++}A(l)}catch(e){k(e.message||"Failed to load bookings")}finally{y(!1)}}(0,i.useEffect)(()=>{I()},[s,j]);const E=Math.max(1,Math.ceil(C/N));async function F(e,a){await async function(e,a={}){return d(e,{method:"POST",body:a})}(`/admin/bookings/${e}/status`,{status:a}),await I(),P&&P.booking&&P.booking.id===e&&T({...P,booking:{...P.booking,status:a}})}return(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"bp-page-head",children:(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"bp-h1",children:"Bookings"}),(0,l.jsx)("div",{className:"bp-muted",children:"Search, filter, and manage appointments"})]})}),_?(0,l.jsx)("div",{className:"bp-error",children:_}):null,(0,l.jsxs)("div",{className:"bp-cards",style:{marginBottom:14},children:[(0,l.jsxs)("div",{className:"bp-card",children:[(0,l.jsx)("div",{className:"bp-card-label",children:"Total (filtered)"}),(0,l.jsx)("div",{className:"bp-card-value",children:f?"â€¦":D.total})]}),(0,l.jsxs)("div",{className:"bp-card",children:[(0,l.jsx)("div",{className:"bp-card-label",children:"Pending"}),(0,l.jsx)("div",{className:"bp-card-value",children:f?"â€¦":D.pending})]}),(0,l.jsxs)("div",{className:"bp-card",children:[(0,l.jsx)("div",{className:"bp-card-label",children:"Confirmed"}),(0,l.jsx)("div",{className:"bp-card-value",children:f?"â€¦":D.confirmed})]}),(0,l.jsxs)("div",{className:"bp-card",children:[(0,l.jsx)("div",{className:"bp-card-label",children:"Cancelled"}),(0,l.jsx)("div",{className:"bp-card-value",children:f?"â€¦":D.cancelled})]})]}),(0,l.jsx)("div",{className:"bp-card",style:{marginBottom:14},children:(0,l.jsxs)("form",{className:"bp-filters",onSubmit:function(e){e.preventDefault(),g(1),I()},children:[(0,l.jsxs)("div",{className:"bp-filter-group",children:[(0,l.jsx)("label",{className:"bp-filter-label",children:"Search"}),(0,l.jsx)("input",{className:"bp-input",placeholder:"Search customer, email, service, agentâ€¦",value:e,onChange:e=>a(e.target.value)})]}),(0,l.jsxs)("div",{className:"bp-filter-group",children:[(0,l.jsx)("label",{className:"bp-filter-label",children:"Status"}),(0,l.jsxs)("select",{className:"bp-input",value:s,onChange:e=>{n(e.target.value),g(1)},children:[(0,l.jsx)("option",{value:"all",children:"All statuses"}),(0,l.jsx)("option",{value:"pending",children:"Pending"}),(0,l.jsx)("option",{value:"confirmed",children:"Confirmed"}),(0,l.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]}),(0,l.jsxs)("div",{className:"bp-filter-group",children:[(0,l.jsx)("label",{className:"bp-filter-label",children:"From date"}),(0,l.jsx)("input",{className:"bp-input",type:"date",value:r,onChange:e=>o(e.target.value)})]}),(0,l.jsxs)("div",{className:"bp-filter-group",children:[(0,l.jsx)("label",{className:"bp-filter-label",children:"To date"}),(0,l.jsx)("input",{className:"bp-input",type:"date",value:p,onChange:e=>b(e.target.value)})]}),(0,l.jsxs)("div",{className:"bp-filter-group",children:[(0,l.jsx)("label",{className:"bp-filter-label",children:"Sort by"}),(0,l.jsxs)("select",{className:"bp-input",value:t,onChange:e=>{c(e.target.value),g(1)},children:[(0,l.jsx)("option",{value:"desc",children:"Newest created first"}),(0,l.jsx)("option",{value:"asc",children:"Oldest created first"})]})]}),(0,l.jsxs)("div",{className:"bp-filter-group",children:[(0,l.jsx)("label",{className:"bp-filter-label",children:"Â "}),(0,l.jsx)("button",{className:"bp-primary-btn",type:"submit",children:"Search"})]})]})}),(0,l.jsxs)("div",{className:"bp-card",children:[(0,l.jsxs)("div",{className:"bp-table",children:[(0,l.jsxs)("div",{className:"bp-tr bp-th",children:[(0,l.jsx)("div",{children:"ID"}),(0,l.jsx)("div",{children:"When"}),(0,l.jsx)("div",{children:"Service"}),(0,l.jsx)("div",{children:"Agent"}),(0,l.jsx)("div",{children:"Customer"}),(0,l.jsx)("div",{children:"Status"})]}),f?(0,l.jsx)("div",{className:"bp-muted",style:{padding:10},children:"Loadingâ€¦"}):null,!f&&w.map(e=>(0,l.jsxs)("button",{className:"bp-tr bp-tr-btn",onClick:()=>async function(e){R(!0),M(""),T({id:e,_loading:!0});try{const a=await d(`/admin/bookings/${e}`),s=a?.data?.booking?a.data:a?.booking?a:a?.data?a.data:a;T(s),s&&(s.booking||s.id||s.status)||M("Booking details response is empty or wrong format.")}catch(e){M(e?.message||"Failed to load booking details")}finally{R(!1)}}(e.id),children:[(0,l.jsxs)("div",{children:["#",e.id]}),(0,l.jsx)("div",{className:"bp-muted",children:e.start_datetime}),(0,l.jsx)("div",{children:e.service_name||"-"}),(0,l.jsx)("div",{children:e.agent_name||"-"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{style:{fontWeight:1100},children:e.customer_name||"-"}),(0,l.jsx)("div",{className:"bp-muted",style:{fontSize:12},children:e.customer_email||"-"})]}),(0,l.jsxs)("div",{className:"bp-row-actions",children:[(0,l.jsx)(m,{status:e.status}),(0,l.jsx)("button",{className:"bp-chip",onClick:a=>{a.stopPropagation(),F(e.id,"confirmed")},children:"Confirm"}),(0,l.jsx)("button",{className:"bp-chip",onClick:a=>{a.stopPropagation(),F(e.id,"cancelled")},children:"Cancel"})]})]},e.id)),f||0!==w.length?null:(0,l.jsx)("div",{className:"bp-muted",style:{padding:10},children:"No bookings found."})]}),(0,l.jsxs)("div",{className:"bp-pager",children:[(0,l.jsx)("button",{className:"bp-top-btn",disabled:j<=1,onClick:()=>g(e=>Math.max(1,e-1)),children:"Prev"}),(0,l.jsxs)("div",{className:"bp-muted",style:{fontWeight:1e3},children:["Page ",j," / ",E]}),(0,l.jsx)("button",{className:"bp-top-btn",disabled:j>=E,onClick:()=>g(e=>Math.min(E,e+1)),children:"Next"})]})]}),P?(0,l.jsx)("div",{className:"bp-drawer-wrap",onMouseDown:e=>{e.target.classList.contains("bp-drawer-wrap")&&T(null)},children:(0,l.jsxs)("div",{className:"bp-drawer",children:[(0,l.jsxs)("div",{className:"bp-drawer-head",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"bp-drawer-title",children:["Booking #",P?.booking?.id||P?.id]}),(0,l.jsxs)("div",{className:"bp-muted",children:[P?.booking?.start_datetime||""," â†’ ",P?.booking?.end_datetime||""]})]}),(0,l.jsx)("button",{className:"bp-top-btn",onClick:()=>T(null),children:"Close"})]}),L?(0,l.jsx)("div",{className:"bp-error",children:L}):null,$?(0,l.jsx)("div",{className:"bp-muted",style:{padding:12},children:"Loading booking detailsâ€¦"}):null,!$&&(P?.booking||P?.id||P?.status)?(0,l.jsx)("div",{className:"bp-drawer-body",children:(()=>{const e=P.booking||P,a=P.customer||{},s=P.service||{},i=P.agent||{};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"bp-drawer-grid",children:[(0,l.jsxs)("div",{className:"bp-section",children:[(0,l.jsx)("div",{className:"bp-section-title",children:"Status"}),(0,l.jsxs)("div",{className:"bp-row2",children:[(0,l.jsx)("div",{children:(0,l.jsx)(m,{status:e.status})}),(0,l.jsxs)("div",{className:"bp-row-actions",children:[(0,l.jsx)("button",{className:"bp-chip",onClick:()=>F(e.id,"confirmed"),children:"Confirm"}),(0,l.jsx)("button",{className:"bp-chip",onClick:()=>F(e.id,"cancelled"),children:"Cancel"}),(0,l.jsx)("button",{className:"bp-chip",onClick:()=>F(e.id,"pending"),children:"Set Pending"})]})]})]}),(0,l.jsxs)("div",{className:"bp-section",children:[(0,l.jsx)("div",{className:"bp-section-title",children:"Customer"}),(0,l.jsxs)("div",{className:"bp-kv",children:[(0,l.jsx)("div",{className:"bp-k",children:"Name"}),(0,l.jsx)("div",{className:"bp-v",children:a.name||"-"}),(0,l.jsx)("div",{className:"bp-k",children:"Email"}),(0,l.jsx)("div",{className:"bp-v",children:a.email||"-"}),(0,l.jsx)("div",{className:"bp-k",children:"Phone"}),(0,l.jsx)("div",{className:"bp-v",children:a.phone||"-"})]})]}),(0,l.jsxs)("div",{className:"bp-section",children:[(0,l.jsx)("div",{className:"bp-section-title",children:"Service"}),(0,l.jsxs)("div",{className:"bp-kv",children:[(0,l.jsx)("div",{className:"bp-k",children:"Service"}),(0,l.jsx)("div",{className:"bp-v",children:s.name||"-"}),(0,l.jsx)("div",{className:"bp-k",children:"Agent"}),(0,l.jsx)("div",{className:"bp-v",children:i.name||"-"}),(0,l.jsx)("div",{className:"bp-k",children:"Extras"}),(0,l.jsx)("div",{className:"bp-v",children:v(P)||"-"})]})]}),(0,l.jsxs)("div",{className:"bp-section",children:[(0,l.jsx)("div",{className:"bp-section-title",children:"Pricing"}),(0,l.jsx)(h,{pricing:P.pricing||{}})]})]}),(0,l.jsxs)("div",{className:"bp-section",style:{marginTop:12},children:[(0,l.jsx)("div",{className:"bp-section-title",children:"Order Items"}),(0,l.jsx)(u,{items:P.order_items||[]})]}),(0,l.jsxs)("div",{className:"bp-section",style:{marginTop:12},children:[(0,l.jsx)("div",{className:"bp-section-title",children:"Form Responses"}),(0,l.jsx)(x,{fields:P.form_fields||[],answers:P.form_answers||{}})]}),(0,l.jsxs)("div",{className:"bp-section",style:{marginTop:12},children:[(0,l.jsx)("div",{className:"bp-section-title",children:"Raw Booking Data (Debug)"}),(0,l.jsx)("pre",{className:"bp-pre",children:JSON.stringify(P.raw||{},null,2)})]})]})})()}):null]})}):null]})}function b(e,a){if(null==e||""===e)return"-";const s=Number(e);return Number.isNaN(s)?String(e):a?`${s.toFixed(2)} ${a}`:s.toFixed(2)}function h({pricing:e}){const a=e.currency||"";return(0,l.jsxs)("div",{className:"bp-kv",children:[(0,l.jsx)("div",{className:"bp-k",children:"Subtotal"}),(0,l.jsx)("div",{className:"bp-v",children:b(e.subtotal,a)}),(0,l.jsx)("div",{className:"bp-k",children:"Extras"}),(0,l.jsx)("div",{className:"bp-v",children:b(e.extras_total,a)}),(0,l.jsx)("div",{className:"bp-k",children:"Discount"}),(0,l.jsx)("div",{className:"bp-v",children:b(e.discount_total,a)}),(0,l.jsx)("div",{className:"bp-k",children:"Tax"}),(0,l.jsx)("div",{className:"bp-v",children:b(e.tax_total,a)}),(0,l.jsx)("div",{className:"bp-k",children:"Total"}),(0,l.jsx)("div",{className:"bp-v",style:{fontWeight:1200},children:b(e.total,a)}),(0,l.jsx)("div",{className:"bp-k",children:"Promo"}),(0,l.jsx)("div",{className:"bp-v",children:e.promo_code||"-"})]})}function u({items:e}){return e&&0!==e.length?(0,l.jsx)("div",{className:"bp-items",children:e.map((e,a)=>{var s,i;return(0,l.jsxs)("div",{className:"bp-item",children:[(0,l.jsx)("div",{style:{fontWeight:1100},children:e.name||e.title||e.service_name||`Item ${a+1}`}),(0,l.jsxs)("div",{className:"bp-muted",style:{fontSize:12},children:["Qty: ",null!==(s=null!==(i=e.qty)&&void 0!==i?i:e.quantity)&&void 0!==s?s:1,e.price?` â€¢ Price: ${e.price}`:""]})]},a)})}):(0,l.jsx)("div",{className:"bp-muted",children:"No order items stored."})}function v(e){const a=e?.order_items||[];if(!a.length)return"";const s=a.map(e=>{const a=e.name||e.title||e.service_name,s=void 0!==e.price&&null!==e.price?` (${e.price})`:"";return a?`${a}${s}`:""}).filter(Boolean);return s.length?s.join(", "):""}function x({fields:e,answers:a}){const s=e||[],i=s.length>0;return i||0!==Object.keys(a||{}).length?i?(0,l.jsx)("div",{className:"bp-kv",children:s.map(e=>{var s;const i=e.key,t=e.scope?`${e.scope}.${e.key}`:null,c=null!==(s=a?.[i])&&void 0!==s?s:t?a?.[t]:void 0,d=Array.isArray(c)?c.join(", "):!0===c?"Yes":!1===c?"No":null!=c?c:"-";return(0,l.jsxs)(n().Fragment,{children:[(0,l.jsx)("div",{className:"bp-k",children:e.label||i}),(0,l.jsx)("div",{className:"bp-v",children:String(d)})]},`${e.scope||"field"}:${i}`)})}):(0,l.jsx)("div",{className:"bp-kv",children:Object.keys(a||{}).map(e=>{const s=a[e],i=Array.isArray(s)?s.join(", "):!0===s?"Yes":!1===s?"No":null!=s?s:"-";return(0,l.jsxs)(n().Fragment,{children:[(0,l.jsx)("div",{className:"bp-k",children:e}),(0,l.jsx)("div",{className:"bp-v",children:String(i)})]},e)})}):(0,l.jsx)("div",{className:"bp-muted",children:"No form answers stored."})}function j(){const[e,a]=(0,i.useState)("customer"),[s,n]=(0,i.useState)([]),[t,c]=(0,i.useState)(""),[r,o]=(0,i.useState)(""),[m,p]=(0,i.useState)(!1),[b,h]=(0,i.useState)(null);async function u(){p(!0),c("");try{const a=await d(`/admin/form-fields?scope=${e}`);n(a?.data||[])}catch(e){n([]),c(e.message||"Failed to load")}finally{p(!1)}}return(0,i.useEffect)(()=>{u()},[e]),(0,l.jsxs)("div",{className:"bp-content",children:[(0,l.jsxs)("div",{className:"bp-page-head",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"bp-h1",children:"Form Fields"}),(0,l.jsx)("div",{className:"bp-muted",children:"Manage custom fields for booking wizard."})]}),(0,l.jsxs)("div",{className:"bp-head-actions",children:[(0,l.jsx)("button",{onClick:()=>a("form"),className:"bp-btn "+("form"===e?"bp-btn-primary":""),children:"Form"}),(0,l.jsx)("button",{onClick:()=>a("customer"),className:"bp-btn "+("customer"===e?"bp-btn-primary":""),children:"Customer"}),(0,l.jsx)("button",{onClick:()=>a("booking"),className:"bp-btn "+("booking"===e?"bp-btn-primary":""),children:"Booking"}),(0,l.jsx)("button",{onClick:async function(){if(confirm("Reseed all default fields (first_name, last_name, email, phone, notes)?")){c(""),o("");try{await d("/admin/form-fields/reseed",{method:"POST",body:{}}),o("Defaults reseeded!"),await u(),setTimeout(()=>o(""),3e3)}catch(e){c(e.message||"Reseed failed")}}},className:"bp-btn",children:"Reseed Defaults"}),(0,l.jsx)("a",{className:"bp-primary-btn",href:`admin.php?page=bp_form_fields_edit&scope=${e}`,children:"+ Add Field"})]})]}),t&&(0,l.jsx)("div",{style:f,children:t}),r&&(0,l.jsx)("div",{style:y,children:r}),(0,l.jsxs)("div",{className:"bp-card",style:{padding:0},children:[m?(0,l.jsx)("div",{style:{padding:20,textAlign:"center",fontWeight:900},children:"â³ Loadingâ€¦"}):null,!m&&0===s.length&&(0,l.jsx)("div",{style:{padding:20,textAlign:"center",opacity:.7,fontWeight:900},children:"ðŸ“­ No fields yet. Add one to get started!"}),!m&&s.length>0&&(0,l.jsx)("div",{style:{overflowX:"auto"},children:(0,l.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",minWidth:900},children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{style:{background:"#f9fafb",borderBottom:"2px solid #e5e7eb"},children:[(0,l.jsx)("th",{style:g,children:"Key"}),(0,l.jsx)("th",{style:g,children:"Label"}),(0,l.jsx)("th",{style:g,children:"Type"}),(0,l.jsx)("th",{style:{...g,textAlign:"center"},children:"Step"}),(0,l.jsx)("th",{style:{...g,textAlign:"center"},children:"Required"}),(0,l.jsx)("th",{style:{...g,textAlign:"center"},children:"Wizard"}),(0,l.jsx)("th",{style:{...g,textAlign:"center"},children:"Enabled"}),(0,l.jsx)("th",{style:{...g,textAlign:"right"},children:"Actions"})]})}),(0,l.jsx)("tbody",{children:s.map(a=>(0,l.jsxs)("tr",{style:{borderBottom:"1px solid #f3f4f6",":hover":{background:"#fafbfc"}},children:[(0,l.jsx)("td",{style:N,children:(0,l.jsx)("code",{style:{background:"#f1f5f9",padding:"4px 8px",borderRadius:6,fontSize:12,fontWeight:900},children:a.field_key||a.name_key||""})}),(0,l.jsx)("td",{style:N,children:a.label}),(0,l.jsx)("td",{style:N,children:(0,l.jsx)("span",{style:{background:"#eef2ff",color:"#3730a3",padding:"4px 8px",borderRadius:6,fontSize:12,fontWeight:900},children:a.type})}),(0,l.jsx)("td",{style:{...N,textAlign:"center",fontSize:12},children:a.step_key}),(0,l.jsx)("td",{style:{...N,textAlign:"center"},children:Number(a.is_required)?"âœ…":"âŒ"}),(0,l.jsx)("td",{style:{...N,textAlign:"center"},children:Number(a.show_in_wizard)?"âœ…":"âŒ"}),(0,l.jsx)("td",{style:{...N,textAlign:"center"},children:Number(a.is_enabled)?"âœ…":"âŒ"}),(0,l.jsxs)("td",{style:{...N,textAlign:"right",whiteSpace:"nowrap"},children:[(0,l.jsx)("a",{className:"bp-btn-sm",href:`admin.php?page=bp_form_fields_edit&id=${a.id}&scope=${e}`,children:"Edit"}),(0,l.jsx)("button",{onClick:()=>async function(e){if(confirm("Delete this field?")){h(e),c("");try{await d(`/admin/form-fields/${e}`,{method:"DELETE"}),await u(),o("Field deleted!"),setTimeout(()=>o(""),3e3)}catch(e){c(e.message||"Delete failed")}finally{h(null)}}}(a.id),className:"bp-btn-sm bp-btn-danger",disabled:b===a.id,children:b===a.id?"â³":"Delete"})]})]},a.id))})]})})]})]})}const g={textAlign:"left",padding:"14px 16px",fontWeight:1e3,fontSize:13,background:"#f9fafb",borderBottom:"2px solid #e5e7eb"},N={padding:"14px 16px",verticalAlign:"middle",fontSize:14},f={background:"#fef2f2",border:"1px solid #fecaca",color:"#991b1b",padding:14,borderRadius:12,fontWeight:900,marginBottom:16,fontSize:14},y={background:"#f0fdf4",border:"1px solid #86efac",color:"#166534",padding:14,borderRadius:12,fontWeight:900,marginBottom:16,fontSize:14};function _(){const[e,a]=(0,i.useState)([]),[s,n]=(0,i.useState)(!0),[t,c]=(0,i.useState)(""),[r,o]=(0,i.useState)("all"),[m,p]=(0,i.useState)("name");(0,i.useEffect)(()=>{!async function(){try{n(!0);const e=await d("/admin/services");a(e?.data||[])}catch(e){console.error(e)}finally{n(!1)}}()},[]);const b=e.filter(e=>`${e.name||""} ${e.title||""} ${e.description||""}`.toLowerCase().includes(t.toLowerCase())).filter(e=>{if("all"===r)return!0;const a=void 0!==e.is_active?!!Number(e.is_active):void 0===e.is_enabled||!!Number(e.is_enabled);return"active"===r?a:!a}).sort((e,a)=>{var s,i,n,t,l,c;if("price"===m)return(null!==(s=e.price_cents)&&void 0!==s?s:e.price?Math.round(100*parseFloat(e.price)):0)-(null!==(i=a.price_cents)&&void 0!==i?i:a.price?Math.round(100*parseFloat(a.price)):0);if("duration"===m)return(null!==(n=null!==(t=e.duration_minutes)&&void 0!==t?t:e.duration)&&void 0!==n?n:0)-(null!==(l=null!==(c=a.duration_minutes)&&void 0!==c?c:a.duration)&&void 0!==l?l:0);const d=(e.name||"").toLowerCase(),r=(a.name||"").toLowerCase();return d.localeCompare(r)}),h=e.reduce((e,a)=>{const s=void 0!==a.is_active?!!Number(a.is_active):void 0===a.is_enabled||!!Number(a.is_enabled);return e.total+=1,s?e.active+=1:e.inactive+=1,e},{total:0,active:0,inactive:0});return(0,l.jsxs)("div",{className:"bp-content",children:[(0,l.jsxs)("div",{className:"bp-page-head",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"bp-h1",children:"Services"}),(0,l.jsx)("div",{className:"bp-muted",children:"Manage services, pricing, and availability."})]}),(0,l.jsx)("div",{className:"bp-head-actions",children:(0,l.jsx)("a",{className:"bp-primary-btn",href:"admin.php?page=bp_services_edit",children:"+ New Service"})})]}),(0,l.jsxs)("div",{className:"bp-cards",style:{marginBottom:14},children:[(0,l.jsxs)("div",{className:"bp-card",children:[(0,l.jsx)("div",{className:"bp-card-label",children:"Total"}),(0,l.jsx)("div",{className:"bp-card-value",children:s?"â€¦":h.total})]}),(0,l.jsxs)("div",{className:"bp-card",children:[(0,l.jsx)("div",{className:"bp-card-label",children:"Active"}),(0,l.jsx)("div",{className:"bp-card-value",children:s?"â€¦":h.active})]}),(0,l.jsxs)("div",{className:"bp-card",children:[(0,l.jsx)("div",{className:"bp-card-label",children:"Inactive"}),(0,l.jsx)("div",{className:"bp-card-value",children:s?"â€¦":h.inactive})]})]}),(0,l.jsx)("div",{className:"bp-card",style:{marginBottom:16},children:(0,l.jsxs)("div",{className:"bp-filters",children:[(0,l.jsx)("input",{type:"text",placeholder:"Search services...",value:t,onChange:e=>c(e.target.value),className:"bp-input",style:{flex:1,minWidth:240}}),(0,l.jsxs)("select",{className:"bp-input",value:r,onChange:e=>o(e.target.value),children:[(0,l.jsx)("option",{value:"all",children:"All statuses"}),(0,l.jsx)("option",{value:"active",children:"Active"}),(0,l.jsx)("option",{value:"inactive",children:"Inactive"})]}),(0,l.jsxs)("select",{className:"bp-input",value:m,onChange:e=>p(e.target.value),children:[(0,l.jsx)("option",{value:"name",children:"Sort: Name"}),(0,l.jsx)("option",{value:"price",children:"Sort: Price"}),(0,l.jsx)("option",{value:"duration",children:"Sort: Duration"})]})]})}),s?(0,l.jsx)("div",{className:"bp-card",children:"Loading..."}):0===b.length?(0,l.jsx)("div",{className:"bp-card",children:"No services found."}):(0,l.jsx)("div",{className:"bp-services-grid",children:b.map(e=>{var a,s,i,n;const t=e.name||e.title||`#${e.id}`,c=(e.description||"").trim(),d=null!==(a=null!==(s=null!==(i=e.duration_minutes)&&void 0!==i?i:e.duration)&&void 0!==s?s:e.duration_min)&&void 0!==a?a:0,r=null!==(n=e.price_cents)&&void 0!==n?n:void 0!==e.price&&null!==e.price?Math.round(100*parseFloat(e.price)):null,o=(e.currency||"USD").toUpperCase(),m=null!==r?`${o} ${(r/100).toFixed(2)}`:"â€”",p=void 0!==e.is_active?!!Number(e.is_active):void 0===e.is_enabled||!!Number(e.is_enabled),b=e.image_url||e.image||"",h=(t||"S").trim().charAt(0).toUpperCase();return(0,l.jsxs)("div",{className:"bp-service-card",children:[(0,l.jsx)("div",{className:"bp-service-cover",children:b?(0,l.jsx)("img",{src:b,alt:t}):(0,l.jsx)("div",{className:"bp-service-placeholder",children:h})}),(0,l.jsxs)("div",{className:"bp-service-info",children:[(0,l.jsxs)("div",{className:"bp-service-title-row",children:[(0,l.jsx)("div",{className:"bp-service-name",children:t}),(0,l.jsx)("span",{className:"bp-status-pill "+(p?"active":"inactive"),children:p?"Active":"Inactive"})]}),c?(0,l.jsx)("div",{className:"bp-service-desc",children:c}):(0,l.jsx)("div",{className:"bp-service-desc muted",children:"No description"}),(0,l.jsxs)("div",{className:"bp-service-meta-row",children:[(0,l.jsxs)("div",{className:"bp-service-meta-item",children:[(0,l.jsx)("div",{className:"bp-service-meta-label",children:"Duration"}),(0,l.jsx)("div",{className:"bp-service-meta-value",children:d?`${d} min`:"â€”"})]}),(0,l.jsxs)("div",{className:"bp-service-meta-item",children:[(0,l.jsx)("div",{className:"bp-service-meta-label",children:"Price"}),(0,l.jsx)("div",{className:"bp-service-meta-value",children:m})]})]}),(0,l.jsx)("div",{className:"bp-service-actions",children:(0,l.jsx)("a",{className:"bp-btn-sm",href:`admin.php?page=bp_services_edit&id=${e.id}`,children:"Edit"})})]})]},e.id)})})]})}function k(){const[e,a]=(0,i.useState)([]),[s,n]=(0,i.useState)(!0),[t,c]=(0,i.useState)("");(0,i.useEffect)(()=>{!async function(){try{n(!0);const e=await d("/admin/categories");a(e?.data||[])}catch(e){console.error(e)}finally{n(!1)}}()},[]);const r=e.filter(e=>(e.name||"").toLowerCase().includes(t.toLowerCase())),o=e.reduce((e,a)=>{const s=void 0!==a.is_active?!!Number(a.is_active):void 0===a.is_enabled||!!Number(a.is_enabled);return e.total+=1,s?e.active+=1:e.inactive+=1,e},{total:0,active:0,inactive:0});return(0,l.jsxs)("div",{className:"bp-content",children:[(0,l.jsxs)("div",{className:"bp-page-head",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"bp-h1",children:"Categories"}),(0,l.jsx)("div",{className:"bp-muted",children:"Group services for easier discovery."})]}),(0,l.jsx)("div",{className:"bp-head-actions",children:(0,l.jsx)("a",{className:"bp-primary-btn",href:"admin.php?page=bp_categories_edit",children:"+ New Category"})})]}),(0,l.jsxs)("div",{className:"bp-cards",style:{marginBottom:14},children:[(0,l.jsxs)("div",{className:"bp-card",children:[(0,l.jsx)("div",{className:"bp-card-label",children:"Total"}),(0,l.jsx)("div",{className:"bp-card-value",children:s?"â€¦":o.total})]}),(0,l.jsxs)("div",{className:"bp-card",children:[(0,l.jsx)("div",{className:"bp-card-label",children:"Active"}),(0,l.jsx)("div",{className:"bp-card-value",children:s?"â€¦":o.active})]}),(0,l.jsxs)("div",{className:"bp-card",children:[(0,l.jsx)("div",{className:"bp-card-label",children:"Inactive"}),(0,l.jsx)("div",{className:"bp-card-value",children:s?"â€¦":o.inactive})]})]}),(0,l.jsx)("div",{className:"bp-card",style:{marginBottom:20},children:(0,l.jsx)("input",{type:"text",placeholder:"Search categories...",value:t,onChange:e=>c(e.target.value),className:"bp-input",style:{width:"100%"}})}),s?(0,l.jsx)("div",{className:"bp-card",children:"Loading..."}):0===r.length?(0,l.jsx)("div",{className:"bp-card",children:"No categories found."}):(0,l.jsx)("div",{className:"bp-entity-grid",children:r.map(e=>{var a,s;const i=e.name||e.title||`#${e.id}`,n=e.image_url||e.image||"",t=(i||"?").trim().slice(0,1).toUpperCase(),c=null!==(a=null!==(s=e.services_count)&&void 0!==s?s:e.service_count)&&void 0!==a?a:0,d=void 0!==e.is_active?!!Number(e.is_active):void 0===e.is_enabled||!!Number(e.is_enabled);return(0,l.jsxs)("div",{className:"bp-entity-card",children:[(0,l.jsxs)("div",{className:"bp-entity-head",children:[(0,l.jsx)("div",{className:"bp-entity-thumb",children:n?(0,l.jsx)("img",{src:n,alt:i}):(0,l.jsx)("div",{className:"bp-entity-initial",children:t})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"bp-entity-title",children:i}),(0,l.jsxs)("div",{className:"bp-entity-sub",children:["Services: ",c]})]}),(0,l.jsx)("span",{className:"bp-status-pill "+(d?"active":"inactive"),children:d?"Active":"Inactive"})]}),(0,l.jsx)("div",{className:"bp-entity-actions",children:(0,l.jsx)("a",{className:"bp-btn-sm",href:`admin.php?page=bp_categories_edit&id=${e.id}`,children:"Edit"})})]},e.id)})})]})}function w(){const[e,a]=(0,i.useState)([]),[s,n]=(0,i.useState)(!0),[t,c]=(0,i.useState)("");(0,i.useEffect)(()=>{!async function(){try{n(!0);const e=await d("/admin/extras");a(e?.data||[])}catch(e){console.error(e)}finally{n(!1)}}()},[]);const r=e.filter(e=>(e.name||"").toLowerCase().includes(t.toLowerCase()));return(0,l.jsxs)("div",{className:"bp-content",children:[(0,l.jsxs)("div",{className:"bp-page-head",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"bp-h1",children:"Service Extras"}),(0,l.jsx)("div",{className:"bp-muted",children:"Upsell add-ons and extras for services."})]}),(0,l.jsx)("div",{className:"bp-head-actions",children:(0,l.jsx)("a",{className:"bp-primary-btn",href:"admin.php?page=bp_extras_edit",children:"+ New Extra"})})]}),(0,l.jsx)("div",{className:"bp-card",style:{marginBottom:20},children:(0,l.jsx)("input",{type:"text",placeholder:"Search extras...",value:t,onChange:e=>c(e.target.value),className:"bp-input",style:{width:"100%"}})}),s?(0,l.jsx)("div",{className:"bp-card",children:"Loading..."}):0===r.length?(0,l.jsx)("div",{className:"bp-card",children:"No extras found."}):(0,l.jsx)("div",{className:"bp-entity-grid",children:r.map(e=>{var a;const s=e.name||e.title||`#${e.id}`,i=e.image_url||e.image||"",n=(s||"E").trim().slice(0,1).toUpperCase(),t=null!==(a=e.price_cents)&&void 0!==a?a:void 0!==e.price&&null!==e.price?Math.round(100*parseFloat(e.price)):null,c=null!==t?`$${(t/100).toFixed(2)}`:"â€”",d=e.type||(e.duration_min?`Duration ${e.duration_min} min`:"â€”"),r=void 0!==e.is_active?!!Number(e.is_active):void 0===e.is_enabled||!!Number(e.is_enabled);return(0,l.jsxs)("div",{className:"bp-entity-card",children:[(0,l.jsxs)("div",{className:"bp-entity-head",children:[(0,l.jsx)("div",{className:"bp-entity-thumb",children:i?(0,l.jsx)("img",{src:i,alt:s}):(0,l.jsx)("div",{className:"bp-entity-initial",children:n})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"bp-entity-title",children:s}),(0,l.jsx)("div",{className:"bp-entity-sub",children:d})]}),(0,l.jsx)("span",{className:"bp-status-pill "+(r?"active":"inactive"),children:r?"Active":"Inactive"})]}),(0,l.jsx)("div",{className:"bp-entity-meta",children:(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"bp-entity-meta-label",children:"Price"}),(0,l.jsx)("div",{className:"bp-entity-meta-value",children:c})]})}),(0,l.jsx)("div",{className:"bp-entity-actions",children:(0,l.jsx)("a",{className:"bp-btn-sm",href:`admin.php?page=bp_extras_edit&id=${e.id}`,children:"Edit"})})]},e.id)})})]})}function S(){const[e,a]=(0,i.useState)([]),[s,n]=(0,i.useState)(!0),[t,c]=(0,i.useState)("");(0,i.useEffect)(()=>{!async function(){try{n(!0);const e=await d("/admin/promo-codes");a(e?.data||[])}catch(e){console.error(e)}finally{n(!1)}}()},[]);const r=e.filter(e=>(e.code||"").toLowerCase().includes(t.toLowerCase()));return(0,l.jsxs)("div",{className:"bp-content",children:[(0,l.jsxs)("div",{className:"bp-page-head",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"bp-h1",children:"Promo Codes"}),(0,l.jsx)("div",{className:"bp-muted",children:"Create discounts and track usage."})]}),(0,l.jsx)("div",{className:"bp-head-actions",children:(0,l.jsx)("a",{className:"bp-primary-btn",href:"admin.php?page=bp_promo_codes_edit",children:"+ New Promo Code"})})]}),(0,l.jsx)("div",{className:"bp-card",style:{marginBottom:20},children:(0,l.jsx)("input",{type:"text",placeholder:"Search promo codes...",value:t,onChange:e=>c(e.target.value),className:"bp-input",style:{width:"100%"}})}),s?(0,l.jsx)("div",{className:"bp-card",children:"Loading..."}):0===r.length?(0,l.jsx)("div",{className:"bp-card",children:"No promo codes found."}):(0,l.jsx)("div",{className:"bp-entity-grid",children:r.map(e=>{var a,s,i,n,t,c;const d=e.code||e.name||`#${e.id}`,r=e.type||e.discount_type||"percent",o=null!==(a=null!==(s=e.amount)&&void 0!==s?s:e.discount_value)&&void 0!==a?a:0,m="percent"===r||"percentage"===r?`${o}%`:`$${(parseFloat(o)||0).toFixed(2)}`,p=null!==(i=null!==(n=e.uses_count)&&void 0!==n?n:e.usage_count)&&void 0!==i?i:0,b=null!==(t=null!==(c=e.max_uses)&&void 0!==c?c:e.usage_limit)&&void 0!==t?t:"âˆž",h=void 0!==e.is_active?!!Number(e.is_active):void 0===e.is_enabled||!!Number(e.is_enabled);return(0,l.jsxs)("div",{className:"bp-entity-card",children:[(0,l.jsxs)("div",{className:"bp-entity-head",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"bp-entity-title",children:d}),(0,l.jsxs)("div",{className:"bp-entity-sub",children:["Discount: ",m]})]}),(0,l.jsx)("span",{className:"bp-status-pill "+(h?"active":"inactive"),children:h?"Active":"Inactive"})]}),(0,l.jsx)("div",{className:"bp-entity-meta",children:(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"bp-entity-meta-label",children:"Usage"}),(0,l.jsxs)("div",{className:"bp-entity-meta-value",children:[p," / ",b]})]})}),(0,l.jsx)("div",{className:"bp-entity-actions",children:(0,l.jsx)("a",{className:"bp-btn-sm",href:`admin.php?page=bp_promo_codes_edit&id=${e.id}`,children:"Edit"})})]},e.id)})})]})}function C({open:e,title:a,onClose:s,children:i,footer:n}){return e?(0,l.jsxs)("div",{style:{position:"fixed",inset:0,zIndex:999999},children:[(0,l.jsx)("div",{onClick:s,style:{position:"absolute",inset:0,background:"rgba(15,23,42,.40)"}}),(0,l.jsxs)("div",{style:{position:"absolute",right:0,top:0,height:"100%",width:"min(520px, 92vw)",background:"#fff",boxShadow:"-10px 0 30px rgba(0,0,0,.10)",display:"flex",flexDirection:"column"},children:[(0,l.jsxs)("div",{style:{padding:14,borderBottom:"1px solid #eef2f7",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,l.jsx)("div",{style:{fontWeight:950},children:a}),(0,l.jsx)("button",{onClick:s,style:B,children:"Ã—"})]}),(0,l.jsx)("div",{style:{padding:14,overflow:"auto",flex:1},children:i}),n?(0,l.jsx)("div",{style:{padding:14,borderTop:"1px solid #eef2f7"},children:n}):null]})]}):null}const B={width:32,height:32,borderRadius:10,border:"1px solid #e5e7eb",background:"#fff",cursor:"pointer",fontWeight:900,fontSize:18};function D({label:e,value:a}){return(0,l.jsxs)("div",{style:{marginBottom:10},children:[(0,l.jsx)("div",{className:"bp-muted",style:{fontSize:12},children:e}),(0,l.jsx)("div",{style:{fontWeight:900},children:a||"â€”"})]})}function A({customerId:e,onClose:a}){const[s,n]=(0,i.useState)(!1),[t,c]=(0,i.useState)(""),[r,o]=(0,i.useState)(null);(0,i.useEffect)(()=>{e&&(async()=>{n(!0),c("");try{const a=await d(`/admin/customers/${e}`);o(a?.data||null)}catch(e){c(e?.message||"Failed to load customer.")}finally{n(!1)}})()},[e]);const m=r?.customer||{},p=r?.bookings||[],b=`${m.first_name||""} ${m.last_name||""}`.trim()||m.name||`#${m.id||""}`;return(0,l.jsxs)(C,{open:!!e,title:`Customer: ${b}`,onClose:a,children:[t?(0,l.jsx)("div",{className:"bp-error",children:t}):null,s?(0,l.jsx)("div",{className:"bp-muted",children:"Loadingâ€¦"}):null,!s&&m?(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"bp-card",style:{marginBottom:12},children:[(0,l.jsx)(D,{label:"ID",value:m.id?`#${m.id}`:"â€”"}),(0,l.jsx)(D,{label:"Name",value:b}),(0,l.jsx)(D,{label:"Email",value:m.email}),(0,l.jsx)(D,{label:"Phone",value:m.phone}),(0,l.jsx)(D,{label:"WP User",value:m.wp_user_id||"â€”"}),(0,l.jsx)(D,{label:"Created",value:m.created_at}),(0,l.jsx)(D,{label:"Updated",value:m.updated_at})]}),m.custom_fields&&Object.keys(m.custom_fields).length?(0,l.jsxs)("div",{className:"bp-card",style:{marginBottom:12},children:[(0,l.jsx)("div",{style:{fontWeight:1e3,marginBottom:8},children:"Custom Fields"}),Object.entries(m.custom_fields).map(([e,a])=>(0,l.jsx)(D,{label:e,value:Array.isArray(a)?a.join(", "):String(a)},e))]}):null,(0,l.jsxs)("div",{className:"bp-card",children:[(0,l.jsx)("div",{style:{fontWeight:1e3,marginBottom:8},children:"Bookings"}),0===p.length?(0,l.jsx)("div",{className:"bp-muted",children:"No bookings found."}):(0,l.jsxs)("div",{className:"bp-table",children:[(0,l.jsxs)("div",{className:"bp-tr bp-th",children:[(0,l.jsx)("div",{children:"ID"}),(0,l.jsx)("div",{children:"When"}),(0,l.jsx)("div",{children:"Service"}),(0,l.jsx)("div",{children:"Agent"}),(0,l.jsx)("div",{children:"Status"})]}),p.map(e=>(0,l.jsxs)("div",{className:"bp-tr",children:[(0,l.jsxs)("div",{children:["#",e.id]}),(0,l.jsx)("div",{className:"bp-muted",children:e.start_datetime||e.start||"â€”"}),(0,l.jsx)("div",{children:e.service_name||"â€”"}),(0,l.jsx)("div",{children:e.agent_name||"â€”"}),(0,l.jsx)("div",{children:e.status||"â€”"})]},e.id))]})]})]}):null]})}function P(){const[e,a]=(0,i.useState)(""),[s,n]=(0,i.useState)("desc"),[t,c]=(0,i.useState)(1),[r]=(0,i.useState)(25),[o,m]=(0,i.useState)(!1),[p,b]=(0,i.useState)(""),[h,u]=(0,i.useState)([]),[v,x]=(0,i.useState)(0),[j,g]=(0,i.useState)(null),[N,f]=(0,i.useState)(!1),[y,_]=(0,i.useState)(!1),[k,w]=(0,i.useState)(null),[S,B]=(0,i.useState)(""),[D,P]=(0,i.useState)(!1),[T,$]=(0,i.useState)(""),[R,L]=(0,i.useState)({first_name:"",last_name:"",email:"",phone:""}),[M,I]=(0,i.useState)([]),[E,F]=(0,i.useState)({});async function U(){m(!0),b("");try{const a=`/admin/customers?q=${encodeURIComponent(e)}&sort=${encodeURIComponent(s)}&page=${t}&per=${r}`,i=await d(a);u(i?.data?.items||[]),x(i?.data?.total||0)}catch(e){b(e?.message||"Failed to load customers.")}finally{m(!1)}}(0,i.useEffect)(()=>{U()},[t,s]),(0,i.useEffect)(()=>{N&&(M.length||(async()=>{try{const e=await d("/admin/customers/form-fields"),a=(e?.data||[]).filter(e=>{var a;return 1===(null!==(a=e.is_enabled)&&void 0!==a?a:1)});I(a)}catch(e){}})())},[N]);const W=window.BP_ADMIN?.adminPostUrl||"admin-post.php",O=window.BP_ADMIN?.adminNonce||"",z=`${W}?action=bp_admin_customers_export_csv&_wpnonce=${encodeURIComponent(O)}`,K=Math.max(1,Math.ceil(v/r));return(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"bp-page-head",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"bp-h1",children:"Customers"}),(0,l.jsx)("div",{className:"bp-muted",children:"View and manage customer profiles."})]}),(0,l.jsxs)("div",{className:"bp-head-actions",children:[(0,l.jsx)("a",{className:"bp-btn",href:z,children:"Export CSV"}),(0,l.jsx)("button",{className:"bp-btn",onClick:()=>{B(""),_(!0)},children:"Import CSV"}),(0,l.jsx)("button",{className:"bp-btn bp-btn-primary",onClick:()=>f(!0),children:"New Customer"})]})]}),p?(0,l.jsx)("div",{className:"bp-error",children:p}):null,(0,l.jsx)("div",{className:"bp-cards",style:{marginBottom:14},children:(0,l.jsxs)("div",{className:"bp-card",children:[(0,l.jsx)("div",{className:"bp-card-label",children:"Total (filtered)"}),(0,l.jsx)("div",{className:"bp-card-value",children:o?"â€¦":v})]})}),(0,l.jsx)("div",{className:"bp-card",style:{marginBottom:14},children:(0,l.jsxs)("form",{className:"bp-filters",onSubmit:function(e){e.preventDefault(),c(1),U()},children:[(0,l.jsx)("input",{className:"bp-input",placeholder:"Search name, email, phoneâ€¦",value:e,onChange:e=>a(e.target.value)}),(0,l.jsxs)("select",{className:"bp-input",value:s,onChange:e=>{n(e.target.value),c(1)},children:[(0,l.jsx)("option",{value:"desc",children:"Latest first"}),(0,l.jsx)("option",{value:"asc",children:"Earliest first"})]}),(0,l.jsx)("button",{className:"bp-primary-btn",type:"submit",children:"Search"})]})}),(0,l.jsxs)("div",{className:"bp-card",children:[(0,l.jsxs)("div",{className:"bp-table",children:[(0,l.jsxs)("div",{className:"bp-tr bp-th",children:[(0,l.jsx)("div",{children:"ID"}),(0,l.jsx)("div",{children:"Name"}),(0,l.jsx)("div",{children:"Email"}),(0,l.jsx)("div",{children:"Phone"}),(0,l.jsx)("div",{children:"Bookings"}),(0,l.jsx)("div",{children:"Created"})]}),o?(0,l.jsx)("div",{className:"bp-muted",style:{padding:10},children:"Loadingâ€¦"}):null,!o&&h.map(e=>{var a,s;const i=`${e.first_name||""} ${e.last_name||""}`.trim()||e.name||`#${e.id}`,n=null!==(a=null!==(s=e.bookings_count)&&void 0!==s?s:e.booking_count)&&void 0!==a?a:0;return(0,l.jsxs)("button",{className:"bp-tr bp-tr-btn",onClick:()=>g(e.id),children:[(0,l.jsxs)("div",{children:["#",e.id]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{style:{fontWeight:1100},children:i}),(0,l.jsx)("div",{className:"bp-muted",style:{fontSize:12},children:e.wp_user_id?`WP User: ${e.wp_user_id}`:"â€”"})]}),(0,l.jsx)("div",{children:e.email||"â€”"}),(0,l.jsx)("div",{children:e.phone||"â€”"}),(0,l.jsx)("div",{children:n}),(0,l.jsx)("div",{className:"bp-muted",children:e.created_at||"â€”"})]},e.id)}),o||0!==h.length?null:(0,l.jsx)("div",{className:"bp-muted",style:{padding:10},children:"No customers found."})]}),(0,l.jsxs)("div",{className:"bp-pager",children:[(0,l.jsx)("button",{className:"bp-top-btn",disabled:t<=1,onClick:()=>c(e=>Math.max(1,e-1)),children:"Prev"}),(0,l.jsxs)("div",{className:"bp-muted",style:{fontWeight:1e3},children:["Page ",t," / ",K]}),(0,l.jsx)("button",{className:"bp-top-btn",disabled:t>=K,onClick:()=>c(e=>Math.min(K,e+1)),children:"Next"})]})]}),(0,l.jsx)(A,{customerId:j,onClose:()=>g(null)}),(0,l.jsxs)(C,{open:N,title:"New Customer",onClose:()=>f(!1),footer:(0,l.jsxs)("div",{style:{display:"flex",gap:8,justifyContent:"flex-end"},children:[(0,l.jsx)("button",{className:"bp-btn",onClick:()=>f(!1),disabled:D,children:"Cancel"}),(0,l.jsx)("button",{className:"bp-btn bp-btn-primary",onClick:async function(){P(!0),$("");try{const e=await d("/admin/customers",{method:"POST",body:{...R,custom_fields:E}});f(!1),L({first_name:"",last_name:"",email:"",phone:""}),F({}),e?.data?.customer?.id&&g(e.data.customer.id),await U()}catch(e){$(e?.message||"Failed to create customer.")}finally{P(!1)}},disabled:D,children:"Save"})]}),children:[T?(0,l.jsx)("div",{className:"bp-error",children:T}):null,(0,l.jsxs)("div",{className:"bp-card",style:{marginBottom:12},children:[(0,l.jsx)("div",{className:"bp-muted",style:{fontSize:12},children:"First Name"}),(0,l.jsx)("input",{className:"bp-input",value:R.first_name,onChange:e=>L({...R,first_name:e.target.value})})]}),(0,l.jsxs)("div",{className:"bp-card",style:{marginBottom:12},children:[(0,l.jsx)("div",{className:"bp-muted",style:{fontSize:12},children:"Last Name"}),(0,l.jsx)("input",{className:"bp-input",value:R.last_name,onChange:e=>L({...R,last_name:e.target.value})})]}),(0,l.jsxs)("div",{className:"bp-card",style:{marginBottom:12},children:[(0,l.jsx)("div",{className:"bp-muted",style:{fontSize:12},children:"Email"}),(0,l.jsx)("input",{className:"bp-input",value:R.email,onChange:e=>L({...R,email:e.target.value})})]}),(0,l.jsxs)("div",{className:"bp-card",style:{marginBottom:12},children:[(0,l.jsx)("div",{className:"bp-muted",style:{fontSize:12},children:"Phone"}),(0,l.jsx)("input",{className:"bp-input",value:R.phone,onChange:e=>L({...R,phone:e.target.value})})]}),M.length?(0,l.jsxs)("div",{className:"bp-card",style:{marginBottom:12},children:[(0,l.jsx)("div",{style:{fontWeight:1e3,marginBottom:8},children:"Custom Fields"}),M.map(e=>{var a;const s=e.field_key||e.name_key||`field_${e.id}`,i=e.label||s,n=e.type||"text",t=e.placeholder||"",c=Array.isArray(e.options)?e.options:[],d=null!==(a=E[s])&&void 0!==a?a:"checkbox"===n?[]:"";if("textarea"===n)return(0,l.jsxs)("div",{style:{marginBottom:12},children:[(0,l.jsx)("div",{className:"bp-muted",style:{fontSize:12},children:i}),(0,l.jsx)("textarea",{className:"bp-input",rows:3,placeholder:t,value:d,onChange:e=>F({...E,[s]:e.target.value})})]},s);if("select"===n)return(0,l.jsxs)("div",{style:{marginBottom:12},children:[(0,l.jsx)("div",{className:"bp-muted",style:{fontSize:12},children:i}),(0,l.jsxs)("select",{className:"bp-input",value:d,onChange:e=>F({...E,[s]:e.target.value}),children:[(0,l.jsx)("option",{value:"",children:"Selectâ€¦"}),c.map((e,a)=>{var i,n,t,c;const d="string"==typeof e?e:null!==(i=null!==(n=e?.value)&&void 0!==n?n:e?.label)&&void 0!==i?i:"",r="string"==typeof e?e:null!==(t=null!==(c=e?.label)&&void 0!==c?c:e?.value)&&void 0!==t?t:"";return(0,l.jsx)("option",{value:d,children:r},`${s}-${a}`)})]})]},s);if("checkbox"===n){if(c.length){const e=Array.isArray(d)?d:[];return(0,l.jsxs)("div",{style:{marginBottom:12},children:[(0,l.jsx)("div",{className:"bp-muted",style:{fontSize:12},children:i}),c.map((a,i)=>{var n,t,c,d;const r="string"==typeof a?a:null!==(n=null!==(t=a?.value)&&void 0!==t?t:a?.label)&&void 0!==n?n:"",o="string"==typeof a?a:null!==(c=null!==(d=a?.label)&&void 0!==d?d:a?.value)&&void 0!==c?c:"",m=e.includes(r);return(0,l.jsxs)("label",{style:{display:"flex",gap:8,alignItems:"center",marginTop:6},children:[(0,l.jsx)("input",{type:"checkbox",checked:m,onChange:a=>{const i=a.target.checked?[...e,r]:e.filter(e=>e!==r);F({...E,[s]:i})}}),(0,l.jsx)("span",{children:o})]},`${s}-${i}`)})]},s)}const e=!!E[s];return(0,l.jsxs)("label",{style:{display:"flex",gap:8,alignItems:"center",marginBottom:12},children:[(0,l.jsx)("input",{type:"checkbox",checked:e,onChange:e=>F({...E,[s]:e.target.checked})}),(0,l.jsx)("span",{children:i})]},s)}return(0,l.jsxs)("div",{style:{marginBottom:12},children:[(0,l.jsx)("div",{className:"bp-muted",style:{fontSize:12},children:i}),(0,l.jsx)("input",{className:"bp-input",type:"number"===n?"number":"date"===n?"date":"email"===n?"email":"tel"===n?"tel":"text",placeholder:t,value:d,onChange:e=>F({...E,[s]:e.target.value})})]},s)})]}):null]}),(0,l.jsxs)(C,{open:y,title:"Import Customers",onClose:()=>_(!1),footer:(0,l.jsxs)("div",{style:{display:"flex",gap:8,justifyContent:"flex-end"},children:[(0,l.jsx)("button",{className:"bp-btn",onClick:()=>_(!1),children:"Cancel"}),(0,l.jsx)("button",{className:"bp-btn bp-btn-primary",form:"bp-customer-import-form",type:"submit",children:"Continue"})]}),children:[S?(0,l.jsx)("div",{className:"bp-error",children:S}):null,(0,l.jsxs)("form",{id:"bp-customer-import-form",method:"post",encType:"multipart/form-data",action:W,onSubmit:e=>{k||(e.preventDefault(),B("Please choose a CSV file."))},children:[(0,l.jsx)("input",{type:"hidden",name:"action",value:"bp_admin_customers_import_csv"}),(0,l.jsx)("input",{type:"hidden",name:"_wpnonce",value:O}),(0,l.jsxs)("div",{className:"bp-card",style:{marginBottom:12},children:[(0,l.jsx)("div",{className:"bp-muted",style:{fontSize:12,marginBottom:6},children:"Select CSV file to upload"}),(0,l.jsx)("input",{type:"file",name:"csv",accept:".csv",onChange:e=>{const a=e.target.files&&e.target.files[0]?e.target.files[0]:null;w(a),a&&B("")}})]})]})]})]})}function T(){const[e,a]=(0,i.useState)([]),[s,n]=(0,i.useState)(!0),[t,c]=(0,i.useState)("");(0,i.useEffect)(()=>{!async function(){try{n(!0);const e=await d("/admin/agents-full");a(e?.data||[])}catch(e){console.error(e),a([])}finally{n(!1)}}()},[]);const r=e.filter(e=>(`${e.first_name||""} ${e.last_name||""}`.trim()||e.name||"").toLowerCase().includes(t.toLowerCase()));return(0,l.jsxs)("div",{className:"bp-content",children:[(0,l.jsxs)("div",{className:"bp-page-head",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"bp-h1",children:"Agents"}),(0,l.jsx)("div",{className:"bp-muted",children:"Manage team members, photos, and assignments."})]}),(0,l.jsx)("div",{className:"bp-head-actions",children:(0,l.jsx)("a",{className:"bp-primary-btn",href:"admin.php?page=bp_agents_edit",children:"+ New Agent"})})]}),(0,l.jsx)("div",{className:"bp-card",style:{marginBottom:14},children:(0,l.jsx)("input",{type:"text",placeholder:"Search agents...",value:t,onChange:e=>c(e.target.value),className:"bp-input",style:{width:"100%"}})}),s?(0,l.jsx)("div",{className:"bp-card",children:"Loading..."}):0===r.length?(0,l.jsx)("div",{className:"bp-card",children:"No agents found."}):(0,l.jsx)("div",{className:"bp-agents-grid",children:r.map(e=>{var a,s;const i=`${e.first_name||""} ${e.last_name||""}`.trim()||e.name||`#${e.id}`,n=null!==(a=null!==(s=e.services_count)&&void 0!==s?s:e.service_count)&&void 0!==a?a:0,t=void 0!==e.is_active?!!Number(e.is_active):void 0===e.is_enabled||!!Number(e.is_enabled),c=i.split(" ").map(e=>e[0]).slice(0,2).join("").toUpperCase();return(0,l.jsxs)("div",{className:"bp-agent-card",children:[(0,l.jsx)("div",{className:"bp-agent-thumb",children:e.image_url?(0,l.jsx)("img",{src:e.image_url,alt:i}):(0,l.jsx)("div",{className:"bp-agent-initials",children:c||"A"})}),(0,l.jsxs)("div",{className:"bp-agent-meta",children:[(0,l.jsx)("div",{className:"bp-agent-name",children:i}),(0,l.jsxs)("div",{className:"bp-agent-sub",children:[e.email||"â€”",e.phone?` â€¢ ${e.phone}`:""]})]}),(0,l.jsxs)("div",{className:"bp-agent-stats",children:[(0,l.jsxs)("div",{className:"bp-agent-stat",children:[(0,l.jsx)("div",{className:"bp-agent-stat-label",children:"Services"}),(0,l.jsx)("div",{className:"bp-agent-stat-value",children:n})]}),(0,l.jsx)("div",{className:"bp-agent-status "+(t?"on":"off"),children:t?"Active":"Inactive"})]}),(0,l.jsx)("div",{className:"bp-agent-actions",children:(0,l.jsx)("a",{className:"bp-top-btn",href:`admin.php?page=bp_agents_edit&id=${e.id}`,children:"Edit"})})]},e.id)})})]})}const $=[{id:"general",label:"General"},{id:"emails",label:"Emails"},{id:"webhooks",label:"Webhooks"},{id:"license",label:"License"},{id:"import_export",label:"Import / Export"}],R=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];function L(){const[e,a]=(0,i.useState)({}),[s,t]=(0,i.useState)(!0),[c,d]=(0,i.useState)(!1),[r,o]=(0,i.useState)(()=>{const e=new URLSearchParams(window.location.search).get("tab");return $.find(a=>a.id===e)?.id||"general"}),m=(0,i.useMemo)(()=>[{code:"AED",name:"UAE Dirham"},{code:"AFN",name:"Afghan Afghani"},{code:"ALL",name:"Albanian Lek"},{code:"AMD",name:"Armenian Dram"},{code:"ANG",name:"Netherlands Antillean Guilder"},{code:"AOA",name:"Angolan Kwanza"},{code:"ARS",name:"Argentine Peso"},{code:"AUD",name:"Australian Dollar"},{code:"AWG",name:"Aruban Florin"},{code:"AZN",name:"Azerbaijani Manat"},{code:"BAM",name:"Bosnia-Herzegovina Convertible Mark"},{code:"BBD",name:"Barbadian Dollar"},{code:"BDT",name:"Bangladeshi Taka"},{code:"BGN",name:"Bulgarian Lev"},{code:"BHD",name:"Bahraini Dinar"},{code:"BIF",name:"Burundian Franc"},{code:"BMD",name:"Bermudian Dollar"},{code:"BND",name:"Brunei Dollar"},{code:"BOB",name:"Bolivian Boliviano"},{code:"BRL",name:"Brazilian Real"},{code:"BSD",name:"Bahamian Dollar"},{code:"BTN",name:"Bhutanese Ngultrum"},{code:"BWP",name:"Botswana Pula"},{code:"BYN",name:"Belarusian Ruble"},{code:"BZD",name:"Belize Dollar"},{code:"CAD",name:"Canadian Dollar"},{code:"CDF",name:"Congolese Franc"},{code:"CHF",name:"Swiss Franc"},{code:"CLP",name:"Chilean Peso"},{code:"CNY",name:"Chinese Yuan"},{code:"COP",name:"Colombian Peso"},{code:"CRC",name:"Costa Rican ColÃ³n"},{code:"CUC",name:"Cuban Convertible Peso"},{code:"CUP",name:"Cuban Peso"},{code:"CVE",name:"Cape Verdean Escudo"},{code:"CZK",name:"Czech Koruna"},{code:"DJF",name:"Djiboutian Franc"},{code:"DKK",name:"Danish Krone"},{code:"DOP",name:"Dominican Peso"},{code:"DZD",name:"Algerian Dinar"},{code:"EGP",name:"Egyptian Pound"},{code:"ERN",name:"Eritrean Nakfa"},{code:"ETB",name:"Ethiopian Birr"},{code:"EUR",name:"Euro"},{code:"FJD",name:"Fijian Dollar"},{code:"FKP",name:"Falkland Islands Pound"},{code:"GBP",name:"British Pound"},{code:"GEL",name:"Georgian Lari"},{code:"GHS",name:"Ghanaian Cedi"},{code:"GIP",name:"Gibraltar Pound"},{code:"GMD",name:"Gambian Dalasi"},{code:"GNF",name:"Guinean Franc"},{code:"GTQ",name:"Guatemalan Quetzal"},{code:"GYD",name:"Guyanaese Dollar"},{code:"HKD",name:"Hong Kong Dollar"},{code:"HNL",name:"Honduran Lempira"},{code:"HRK",name:"Croatian Kuna"},{code:"HTG",name:"Haitian Gourde"},{code:"HUF",name:"Hungarian Forint"},{code:"IDR",name:"Indonesian Rupiah"},{code:"ILS",name:"Israeli New Shekel"},{code:"INR",name:"Indian Rupee"},{code:"IQD",name:"Iraqi Dinar"},{code:"IRR",name:"Iranian Rial"},{code:"ISK",name:"Icelandic KrÃ³na"},{code:"JMD",name:"Jamaican Dollar"},{code:"JOD",name:"Jordanian Dinar"},{code:"JPY",name:"Japanese Yen"},{code:"KES",name:"Kenyan Shilling"},{code:"KGS",name:"Kyrgystani Som"},{code:"KHR",name:"Cambodian Riel"},{code:"KMF",name:"Comorian Franc"},{code:"KPW",name:"North Korean Won"},{code:"KRW",name:"South Korean Won"},{code:"KWD",name:"Kuwaiti Dinar"},{code:"KYD",name:"Cayman Islands Dollar"},{code:"KZT",name:"Kazakhstani Tenge"},{code:"LAK",name:"Laotian Kip"},{code:"LBP",name:"Lebanese Pound"},{code:"LKR",name:"Sri Lankan Rupee"},{code:"LRD",name:"Liberian Dollar"},{code:"LSL",name:"Lesotho Loti"},{code:"LYD",name:"Libyan Dinar"},{code:"MAD",name:"Moroccan Dirham"},{code:"MDL",name:"Moldovan Leu"},{code:"MGA",name:"Malagasy Ariary"},{code:"MKD",name:"Macedonian Denar"},{code:"MMK",name:"Myanmar Kyat"},{code:"MNT",name:"Mongolian TÃ¶grÃ¶g"},{code:"MOP",name:"Macanese Pataca"},{code:"MRU",name:"Mauritanian Ouguiya"},{code:"MUR",name:"Mauritian Rupee"},{code:"MVR",name:"Maldivian Rufiyaa"},{code:"MWK",name:"Malawian Kwacha"},{code:"MXN",name:"Mexican Peso"},{code:"MYR",name:"Malaysian Ringgit"},{code:"MZN",name:"Mozambican Metical"},{code:"NAD",name:"Namibian Dollar"},{code:"NGN",name:"Nigerian Naira"},{code:"NIO",name:"Nicaraguan CÃ³rdoba"},{code:"NOK",name:"Norwegian Krone"},{code:"NPR",name:"Nepalese Rupee"},{code:"NZD",name:"New Zealand Dollar"},{code:"OMR",name:"Omani Rial"},{code:"PAB",name:"Panamanian Balboa"},{code:"PEN",name:"Peruvian Sol"},{code:"PGK",name:"Papua New Guinean Kina"},{code:"PHP",name:"Philippine Peso"},{code:"PKR",name:"Pakistani Rupee"},{code:"PLN",name:"Polish ZÅ‚oty"},{code:"PYG",name:"Paraguayan GuaranÃ­"},{code:"QAR",name:"Qatari Riyal"},{code:"RON",name:"Romanian Leu"},{code:"RSD",name:"Serbian Dinar"},{code:"RUB",name:"Russian Ruble"},{code:"RWF",name:"Rwandan Franc"},{code:"SAR",name:"Saudi Riyal"},{code:"SBD",name:"Solomon Islands Dollar"},{code:"SCR",name:"Seychellois Rupee"},{code:"SDG",name:"Sudanese Pound"},{code:"SEK",name:"Swedish Krona"},{code:"SGD",name:"Singapore Dollar"},{code:"SHP",name:"Saint Helena Pound"},{code:"SLE",name:"Sierra Leonean Leone"},{code:"SOS",name:"Somali Shilling"},{code:"SRD",name:"Surinamese Dollar"},{code:"SSP",name:"South Sudanese Pound"},{code:"STN",name:"SÃ£o TomÃ© and PrÃ­ncipe Dobra"},{code:"SYP",name:"Syrian Pound"},{code:"SZL",name:"Swazi Lilangeni"},{code:"THB",name:"Thai Baht"},{code:"TJS",name:"Tajikistani Somoni"},{code:"TMT",name:"Turkmenistani Manat"},{code:"TND",name:"Tunisian Dinar"},{code:"TOP",name:"Tongan PaÊ»anga"},{code:"TRY",name:"Turkish Lira"},{code:"TTD",name:"Trinidad and Tobago Dollar"},{code:"TWD",name:"New Taiwan Dollar"},{code:"TZS",name:"Tanzanian Shilling"},{code:"UAH",name:"Ukrainian Hryvnia"},{code:"UGX",name:"Ugandan Shilling"},{code:"USD",name:"US Dollar"},{code:"UYU",name:"Uruguayan Peso"},{code:"UZS",name:"Uzbekistan Som"},{code:"VES",name:"Venezuelan BolÃ­var"},{code:"VND",name:"Vietnamese Äá»“ng"},{code:"VUV",name:"Vanuatu Vatu"},{code:"WST",name:"Samoan TÄlÄ"},{code:"XAF",name:"Central African CFA Franc"},{code:"XCD",name:"East Caribbean Dollar"},{code:"XOF",name:"West African CFA Franc"},{code:"XPF",name:"CFP Franc"},{code:"YER",name:"Yemeni Rial"},{code:"ZAR",name:"South African Rand"},{code:"ZMW",name:"Zambian Kwacha"},{code:"ZWL",name:"Zimbabwean Dollar"}],[]),p=window.BP_ADMIN?.adminPostUrl||"admin-post.php",b=window.BP_ADMIN?.adminNonce||"",h=window.BP_ADMIN?.license||{};function u(s,i){a({...e,[s]:i})}function v(a,s){const i=Array.isArray(a)?a:[a];for(const a of i)if(Object.prototype.hasOwnProperty.call(e,a))return e[a];return s}function x(e){return!0===e||1===e||"1"===e||"true"===e}async function j(){try{const a=await fetch(`${window.BP_ADMIN?.restUrl}/admin/settings`,{method:"POST",headers:{"X-WP-Nonce":window.BP_ADMIN?.nonce,"Content-Type":"application/json"},body:JSON.stringify(e)});"success"===(await a.json()).status&&(d(!0),setTimeout(()=>d(!1),3e3))}catch(e){console.error(e)}}(0,i.useEffect)(()=>{!async function(){try{t(!0);const e=await fetch(`${window.BP_ADMIN?.restUrl}/admin/settings`,{headers:{"X-WP-Nonce":window.BP_ADMIN?.nonce}}),s=await e.json();a(s.data||{})}catch(e){console.error(e)}finally{t(!1)}}()},[]),(0,i.useEffect)(()=>{const e=new URL(window.location.href);e.searchParams.set("tab",r),window.history.replaceState({},"",e.toString())},[r]);const g=(0,i.useMemo)(()=>Object.keys(e||{}).filter(e=>!["slot_interval_minutes","currency","currency_position","bp_open_time","bp_close_time","bp_future_days_limit","bp_breaks","bp_email_enabled","bp_admin_email","bp_email_from_name","bp_email_from_email","webhooks_enabled","webhooks_secret","webhooks_url_booking_created","webhooks_url_booking_status_changed","webhooks_url_booking_updated","webhooks_url_booking_cancelled","bp_remove_data_on_uninstall"].includes(e)).sort(),[e]);function N(e,a){return"boolean"==typeof a?(0,l.jsx)("input",{type:"checkbox",checked:a,onChange:a=>u(e,a.target.checked)}):"number"==typeof a?(0,l.jsx)("input",{type:"number",value:a,onChange:a=>u(e,Number(a.target.value)),className:"bp-input"}):Array.isArray(a)||a&&"object"==typeof a?(0,l.jsx)("textarea",{className:"bp-input",rows:3,value:JSON.stringify(a),onChange:a=>{try{u(e,JSON.parse(a.target.value))}catch{u(e,a.target.value)}}}):(0,l.jsx)("input",{type:"text",value:null!=a?a:"",onChange:a=>u(e,a.target.value),className:"bp-input"})}if(s)return(0,l.jsx)("div",{className:"bp-card",children:"Loading..."});const f=(()=>{const e=(h.status||"").toLowerCase();return"valid"===e?"âœ… valid":"expired"===e?"âš ï¸ expired":"invalid"===e?"âŒ invalid":"â€” unset"})(),y=`${p}?action=bp_admin_settings_export_json&_wpnonce=${encodeURIComponent(b)}`;return(0,l.jsxs)("div",{className:"bp-container bp-settings",children:[(0,l.jsx)("div",{className:"bp-settings-hero",children:(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"bp-settings-title",children:"Settings"}),(0,l.jsx)("div",{className:"bp-muted",children:"Configure scheduling, notifications, and system preferences."})]})}),(0,l.jsxs)("div",{className:"bp-settings-layout",children:[(0,l.jsx)("div",{className:"bp-settings-nav bp-card",children:$.map(e=>(0,l.jsx)("button",{className:"bp-tab "+(r===e.id?"active":""),onClick:()=>o(e.id),type:"button",children:e.label},e.id))}),(0,l.jsxs)("div",{className:"bp-settings-panel",children:["general"===r&&(0,l.jsxs)("div",{className:"bp-settings-grid",children:[(0,l.jsxs)("div",{className:"bp-card",children:[(0,l.jsx)("div",{className:"bp-section-title",children:"Business Hours"}),(0,l.jsxs)("div",{className:"bp-settings-grid-2",children:[(0,l.jsxs)("div",{className:"bp-settings-field",children:[(0,l.jsx)("label",{className:"bp-label",children:"Open time"}),(0,l.jsx)("input",{type:"text",placeholder:"09:00",value:v("bp_open_time","09:00"),onChange:e=>u("bp_open_time",e.target.value),className:"bp-input"})]}),(0,l.jsxs)("div",{className:"bp-settings-field",children:[(0,l.jsx)("label",{className:"bp-label",children:"Close time"}),(0,l.jsx)("input",{type:"text",placeholder:"17:00",value:v("bp_close_time","17:00"),onChange:e=>u("bp_close_time",e.target.value),className:"bp-input"})]}),(0,l.jsxs)("div",{className:"bp-settings-field",children:[(0,l.jsx)("label",{className:"bp-label",children:"Slot Interval (minutes)"}),(0,l.jsx)("input",{type:"number",min:5,max:120,value:v("slot_interval_minutes",15),onChange:e=>u("slot_interval_minutes",parseInt(e.target.value||15,10)),className:"bp-input"})]}),(0,l.jsxs)("div",{className:"bp-settings-field",children:[(0,l.jsx)("label",{className:"bp-label",children:"Booking limit (days ahead)"}),(0,l.jsx)("input",{type:"number",min:1,max:365,value:v("bp_future_days_limit",60),onChange:e=>u("bp_future_days_limit",parseInt(e.target.value||60,10)),className:"bp-input"}),(0,l.jsx)("div",{className:"bp-muted",style:{fontSize:12,marginTop:6},children:"Customers can only book up to this many days in advance"})]})]}),(0,l.jsx)("div",{className:"bp-section-title",style:{marginTop:16},children:"Pricing"}),(0,l.jsxs)("div",{className:"bp-settings-grid-2",children:[(0,l.jsxs)("div",{className:"bp-settings-field",children:[(0,l.jsx)("label",{className:"bp-label",children:"Currency"}),(0,l.jsx)("select",{value:v(["currency","bp_default_currency"],"USD"),onChange:e=>u("currency",e.target.value),className:"bp-input",children:m.map(e=>(0,l.jsxs)("option",{value:e.code,children:[e.code," - ",e.name]},e.code))})]}),(0,l.jsxs)("div",{className:"bp-settings-field",children:[(0,l.jsx)("label",{className:"bp-label",children:"Currency Position"}),(0,l.jsxs)("select",{value:v(["currency_position","bp_currency_position"],"before"),onChange:e=>u("currency_position",e.target.value),className:"bp-input",children:[(0,l.jsx)("option",{value:"before",children:"Before amount (e.g., $10)"}),(0,l.jsx)("option",{value:"after",children:"After amount (e.g., 10$)"})]})]}),(0,l.jsxs)("div",{className:"bp-settings-field",style:{gridColumn:"1 / -1"},children:[(0,l.jsx)("label",{className:"bp-label",children:"Daily breaks"}),(0,l.jsx)("input",{type:"text",placeholder:"12:00-13:00,15:00-15:15",value:v("bp_breaks","12:00-13:00"),onChange:e=>u("bp_breaks",e.target.value),className:"bp-input"}),(0,l.jsx)("div",{className:"bp-muted",style:{fontSize:12,marginTop:6},children:"Comma-separated break times (e.g., 12:00-13:00,15:00-15:15)"})]})]}),(0,l.jsx)("div",{className:"bp-section-title",style:{marginTop:16},children:"Weekly Schedule"}),(0,l.jsxs)("div",{className:"bp-settings-week",children:[R.map((e,a)=>(0,l.jsxs)("div",{className:"bp-settings-week-row",children:[(0,l.jsx)("div",{className:"bp-settings-week-day",children:e}),(0,l.jsx)("input",{type:"text",placeholder:"09:00-17:00",value:v(`bp_schedule_${a}`,""),onChange:e=>u(`bp_schedule_${a}`,e.target.value),className:"bp-input"})]},e)),(0,l.jsx)("div",{className:"bp-muted",style:{fontSize:12},children:"Leave empty for closed days. Format: HH:MM-HH:MM (e.g., 09:00-17:00)"})]}),(0,l.jsx)("div",{className:"bp-section-title",style:{marginTop:16},children:"Uninstall"}),(0,l.jsxs)("label",{className:"bp-check",children:[(0,l.jsx)("input",{type:"checkbox",checked:x(v("bp_remove_data_on_uninstall",0)),onChange:e=>u("bp_remove_data_on_uninstall",e.target.checked?1:0)}),"Delete all BookPoint data when the plugin is uninstalled."]}),(0,l.jsxs)("div",{className:"bp-settings-actions",children:[(0,l.jsx)("button",{onClick:j,className:"bp-btn bp-btn-primary",children:"Save Settings"}),c&&(0,l.jsx)("span",{className:"bp-settings-saved",children:"âœ“ Saved!"})]})]}),(0,l.jsxs)("div",{className:"bp-card",children:[(0,l.jsx)("div",{className:"bp-section-title",children:"All Settings"}),0===g.length?(0,l.jsx)("div",{className:"bp-muted",children:"No additional settings found."}):(0,l.jsx)("div",{className:"bp-kv",children:g.map(a=>(0,l.jsxs)(n().Fragment,{children:[(0,l.jsx)("div",{className:"bp-k",children:a}),(0,l.jsx)("div",{className:"bp-v",children:N(a,e[a])})]},a))})]})]}),"emails"===r&&(0,l.jsxs)("div",{className:"bp-card bp-settings-section",children:[(0,l.jsx)("div",{className:"bp-section-title",style:{marginBottom:10},children:"Email Notifications"}),(0,l.jsxs)("label",{style:{display:"flex",gap:10,alignItems:"center",marginBottom:16},children:[(0,l.jsx)("input",{type:"checkbox",checked:x(v("bp_email_enabled",1)),onChange:e=>u("bp_email_enabled",e.target.checked?1:0)}),"Send email notifications for bookings"]}),(0,l.jsxs)("div",{style:{marginBottom:22},children:[(0,l.jsx)("label",{className:"bp-label",style:{display:"block",marginBottom:6},children:"Admin email"}),(0,l.jsx)("input",{type:"email",value:v("bp_admin_email",""),onChange:e=>u("bp_admin_email",e.target.value),className:"bp-input bp-settings-input-wide",autoComplete:"off"})]}),(0,l.jsxs)("div",{style:{marginBottom:22},children:[(0,l.jsx)("label",{className:"bp-label",style:{display:"block",marginBottom:6},children:"From name"}),(0,l.jsx)("input",{type:"text",value:v("bp_email_from_name",""),onChange:e=>u("bp_email_from_name",e.target.value),className:"bp-input bp-settings-input-wide",autoComplete:"off"})]}),(0,l.jsxs)("div",{style:{marginBottom:22},children:[(0,l.jsx)("label",{className:"bp-label",style:{display:"block",marginBottom:6},children:"From email"}),(0,l.jsx)("input",{type:"email",value:v("bp_email_from_email",""),onChange:e=>u("bp_email_from_email",e.target.value),className:"bp-input bp-settings-input-wide",autoComplete:"off"})]}),(0,l.jsx)("button",{onClick:j,className:"bp-btn bp-btn-primary",style:{marginRight:10},children:"Save Settings"}),c&&(0,l.jsx)("span",{style:{color:"green",marginLeft:10},children:"âœ“ Saved!"})]}),"webhooks"===r&&(0,l.jsxs)("div",{className:"bp-card bp-settings-section",children:[(0,l.jsx)("div",{className:"bp-section-title",style:{marginBottom:10},children:"Webhooks"}),(0,l.jsxs)("label",{style:{display:"flex",gap:10,alignItems:"center",marginBottom:16},children:[(0,l.jsx)("input",{type:"checkbox",checked:x(v("bp_webhooks_enabled",0)),onChange:e=>u("bp_webhooks_enabled",e.target.checked?1:0)}),"Send webhook events for bookings"]}),(0,l.jsxs)("div",{style:{marginBottom:22},children:[(0,l.jsx)("label",{className:"bp-label",style:{display:"block",marginBottom:6},children:"Webhook secret"}),(0,l.jsx)("input",{type:"text",value:v("bp_webhook_secret",""),onChange:e=>u("bp_webhook_secret",e.target.value),className:"bp-input bp-settings-input-wide",autoComplete:"off"}),(0,l.jsx)("div",{className:"bp-settings-desc",children:"Used to sign webhook payloads (optional)."})]}),(0,l.jsxs)("div",{style:{marginBottom:22},children:[(0,l.jsx)("label",{className:"bp-label",style:{display:"block",marginBottom:6},children:"Booking created URL"}),(0,l.jsx)("input",{type:"text",value:v("bp_webhook_created_url",""),onChange:e=>u("bp_webhook_created_url",e.target.value),className:"bp-input bp-settings-input-wide",autoComplete:"off"})]}),(0,l.jsxs)("div",{style:{marginBottom:22},children:[(0,l.jsx)("label",{className:"bp-label",style:{display:"block",marginBottom:6},children:"Booking status changed URL"}),(0,l.jsx)("input",{type:"text",value:v("bp_webhook_status_changed_url",""),onChange:e=>u("bp_webhook_status_changed_url",e.target.value),className:"bp-input bp-settings-input-wide",autoComplete:"off"})]}),(0,l.jsxs)("div",{style:{marginBottom:22},children:[(0,l.jsx)("label",{className:"bp-label",style:{display:"block",marginBottom:6},children:"Booking updated URL"}),(0,l.jsx)("input",{type:"text",value:v("bp_webhook_updated_url",""),onChange:e=>u("bp_webhook_updated_url",e.target.value),className:"bp-input bp-settings-input-wide",autoComplete:"off"})]}),(0,l.jsxs)("div",{style:{marginBottom:22},children:[(0,l.jsx)("label",{className:"bp-label",style:{display:"block",marginBottom:6},children:"Booking cancelled URL"}),(0,l.jsx)("input",{type:"text",value:v("bp_webhook_cancelled_url",""),onChange:e=>u("bp_webhook_cancelled_url",e.target.value),className:"bp-input bp-settings-input-wide",autoComplete:"off"})]}),(0,l.jsx)("button",{onClick:j,className:"bp-btn bp-btn-primary",style:{marginRight:10},children:"Save Settings"}),c&&(0,l.jsx)("span",{style:{color:"green",marginLeft:10},children:"âœ“ Saved!"})]}),"license"===r&&(0,l.jsxs)("div",{className:"bp-card bp-settings-section",children:[(0,l.jsx)("div",{className:"bp-section-title",style:{marginBottom:10},children:"License"}),(0,l.jsxs)("form",{method:"post",action:p,style:{marginBottom:18},children:[(0,l.jsx)("input",{type:"hidden",name:"action",value:"bp_admin_settings_save_license"}),(0,l.jsx)("input",{type:"hidden",name:"_wpnonce",value:b}),(0,l.jsxs)("div",{style:{marginBottom:18},children:[(0,l.jsx)("label",{className:"bp-label",style:{display:"block",marginBottom:6},children:"License key"}),(0,l.jsx)("input",{type:"text",name:"bp_license_key",defaultValue:v("bp_license_key",""),className:"bp-input bp-settings-input-wide",style:{minWidth:260},placeholder:"Enter license key..."}),(0,l.jsx)("span",{className:"bp-badge",style:{fontWeight:900,fontSize:14,marginLeft:12},children:f})]}),(0,l.jsx)("button",{className:"bp-btn bp-btn-primary",type:"submit",children:"Save License"})]}),(0,l.jsxs)("form",{method:"post",action:p,children:[(0,l.jsx)("input",{type:"hidden",name:"action",value:"bp_admin_settings_validate_license"}),(0,l.jsx)("input",{type:"hidden",name:"_wpnonce",value:b}),(0,l.jsx)("button",{className:"bp-btn",type:"submit",children:"Validate Now"}),(0,l.jsx)("div",{className:"bp-muted",style:{fontSize:12,marginTop:6},children:"Forces a license check immediately."})]})]}),"import_export"===r&&(0,l.jsxs)("div",{className:"bp-card bp-settings-section",children:[(0,l.jsx)("div",{className:"bp-section-title",style:{marginBottom:10},children:"Import / Export"}),(0,l.jsxs)("div",{style:{marginBottom:12},children:[(0,l.jsx)("div",{style:{fontWeight:900,marginBottom:6},children:"Export settings"}),(0,l.jsx)("div",{className:"bp-muted",style:{fontSize:12,marginBottom:10},children:"Downloads a JSON file with BookPoint settings."}),(0,l.jsx)("a",{className:"bp-btn bp-btn-primary",href:y,children:"Export JSON"})]}),(0,l.jsx)("hr",{style:{margin:"16px 0"}}),(0,l.jsxs)("div",{style:{marginBottom:12},children:[(0,l.jsx)("div",{style:{fontWeight:900,marginBottom:6},children:"Import settings"}),(0,l.jsx)("div",{className:"bp-muted",style:{fontSize:12,marginBottom:10},children:"Upload a previously exported JSON file. Only whitelisted settings keys are imported."}),(0,l.jsxs)("form",{method:"post",action:p,encType:"multipart/form-data",onSubmit:e=>{confirm("Import settings JSON?")||e.preventDefault()},children:[(0,l.jsx)("input",{type:"hidden",name:"action",value:"bp_admin_settings_import_json"}),(0,l.jsx)("input",{type:"hidden",name:"_wpnonce",value:b}),(0,l.jsx)("input",{type:"file",name:"bp_settings_file",accept:"application/json",required:!0}),(0,l.jsx)("button",{className:"bp-btn",type:"submit",style:{marginLeft:8},children:"Import JSON"})]})]})]})]})]})]})}function M(){const[e,a]=(0,i.useState)([]),[s,n]=(0,i.useState)(!0),[t,c]=(0,i.useState)("all");(0,i.useEffect)(()=>{!async function(){try{n(!0);const e=await fetch(`${window.BP_ADMIN?.restUrl}/admin/audit-logs`,{headers:{"X-WP-Nonce":window.BP_ADMIN?.nonce}}),s=await e.json(),i=s.data?.items||s.data||[];a(i)}catch(e){console.error(e)}finally{n(!1)}}()},[]);const d="all"===t?e:e.filter(e=>(e.event||e.action)===t);return(0,l.jsxs)("div",{className:"bp-container",children:[(0,l.jsxs)("div",{className:"bp-header",children:[(0,l.jsx)("h1",{children:"Audit Log"}),(0,l.jsx)("button",{onClick:()=>a([]),className:"bp-btn bp-btn-secondary",children:"Clear Log"})]}),(0,l.jsx)("div",{className:"bp-card",style:{marginBottom:20},children:(0,l.jsxs)("select",{value:t,onChange:e=>c(e.target.value),className:"bp-input",children:[(0,l.jsx)("option",{value:"all",children:"All Actions"}),(0,l.jsx)("option",{value:"create",children:"Create"}),(0,l.jsx)("option",{value:"update",children:"Update"}),(0,l.jsx)("option",{value:"delete",children:"Delete"}),(0,l.jsx)("option",{value:"view",children:"View"})]})}),s?(0,l.jsx)("div",{className:"bp-card",children:"Loading..."}):0===d.length?(0,l.jsx)("div",{className:"bp-card",children:"No audit logs found."}):(0,l.jsx)("div",{className:"bp-table-wrapper",children:(0,l.jsxs)("table",{className:"bp-table",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"User"}),(0,l.jsx)("th",{children:"Action"}),(0,l.jsx)("th",{children:"Item"}),(0,l.jsx)("th",{children:"Timestamp"}),(0,l.jsx)("th",{children:"Details"})]})}),(0,l.jsx)("tbody",{children:d.map((e,a)=>{const s=e.actor_name||e.user_name||e.actor_type||"-",i=e.event||e.action||"-",n=e.item_type||e.resource||(e.booking_id?`Booking #${e.booking_id}`:"-"),t=e.created_at?new Date(e.created_at).toLocaleString():"-",c=e.details||e.meta||e.message||"-";return(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{children:s}),(0,l.jsx)("td",{children:i}),(0,l.jsx)("td",{children:n}),(0,l.jsx)("td",{children:t}),(0,l.jsx)("td",{children:"string"==typeof c?c:JSON.stringify(c)})]},a)})})]})})]})}function I(){const[e]=(0,i.useState)([{id:"sync_relations",name:"Sync Relations",description:"Rebuild service/agent/category relations"},{id:"generate_demo",name:"Generate Demo Data",description:"Create sample services, agents, customers, bookings"},{id:"reset_cache",name:"Reset Cache",description:"Clear cached data"}]),[a,s]=(0,i.useState)(null),[n,t]=(0,i.useState)(null);async function c(){try{const e=await fetch(`${window.BP_ADMIN?.restUrl}/admin/tools/status`,{headers:{"X-WP-Nonce":window.BP_ADMIN?.nonce}}),a=await e.json();t(a.data||null)}catch(e){console.error(e)}}return(0,i.useEffect)(()=>{c()},[]),(0,l.jsxs)("div",{className:"bp-container",children:[(0,l.jsx)("div",{className:"bp-header",children:(0,l.jsx)("h1",{children:"Tools"})}),n?(0,l.jsxs)("div",{className:"bp-card",style:{marginBottom:20},children:[(0,l.jsx)("div",{className:"bp-card-label",children:"System Status"}),(0,l.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:10,marginTop:10},children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("strong",{children:"DB Version:"})," ",n.db_version||"-"]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("strong",{children:"Plugin Version:"})," ",n.plugin_version||"-"]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("strong",{children:"Tables:"})," ",n.tables_ok_count||0," / ",n.tables_total||0]})]})]}):null,(0,l.jsx)("div",{className:"bp-grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:20},children:e.map(e=>(0,l.jsxs)("div",{className:"bp-card",children:[(0,l.jsx)("h3",{children:e.name}),(0,l.jsx)("p",{style:{color:"#666",marginBottom:15},children:e.description}),(0,l.jsx)("button",{onClick:()=>async function(e){try{s(e);const a=await fetch(`${window.BP_ADMIN?.restUrl}/admin/tools/run/${e}`,{method:"POST",headers:{"X-WP-Nonce":window.BP_ADMIN?.nonce,"Content-Type":"application/json"},body:JSON.stringify({})}),i=await a.json();alert(i.message||i.data?.message||"Tool completed"),c()}catch(e){console.error(e),alert("Error running tool")}finally{s(null)}}(e.id),disabled:a===e.id,className:"bp-btn bp-btn-primary",style:{width:"100%"},children:a===e.id?"Running...":"Run"})]},e.id))})]})}function E({eventKey:e,open:a,onClose:s}){const[n,t]=(0,i.useState)([]),[c,r]=(0,i.useState)(!1),[o,m]=(0,i.useState)(""),[p,b]=(0,i.useState)("");return(0,i.useEffect)(()=>{a&&(r(!0),m(""),d(`/smart-variables?event_key=${encodeURIComponent(e)}`).then(e=>{t(e?.data||[])}).catch(e=>{console.error(e),m(e.message||"Could not load variables.")}).finally(()=>r(!1)))},[e,a]),a?(0,l.jsx)("div",{className:"bp-drawer-wrap",onMouseDown:e=>{e.target===e.currentTarget&&s()},children:(0,l.jsxs)("div",{className:"bp-drawer",style:{width:"min(520px, 100%)"},children:[(0,l.jsxs)("div",{className:"bp-drawer-head",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"bp-drawer-title",children:"Smart variables"}),(0,l.jsxs)("div",{className:"bp-muted",style:{marginTop:4},children:["Event: ",e]})]}),(0,l.jsx)("button",{className:"bp-top-btn",onClick:s,children:"Close"})]}),(0,l.jsxs)("div",{className:"bp-drawer-body",children:[o?(0,l.jsx)("div",{className:"bp-error",children:o}):null,c?(0,l.jsx)("div",{className:"bp-muted",children:"Loading variablesâ€¦"}):null,c||o||0!==n.length?null:(0,l.jsx)("div",{className:"bp-muted",children:"No variables available."}),n.map(e=>(0,l.jsxs)("div",{style:{marginBottom:20},children:[(0,l.jsx)("div",{className:"bp-section-title",style:{marginBottom:8},children:e.label}),(0,l.jsx)("div",{style:{display:"grid",gap:10},children:e.variables?.map(e=>(0,l.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px 10px",borderRadius:12,background:"#f8fafc",border:"1px solid #e2e8f0"},children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{style:{fontFamily:"monospace",fontSize:13,marginBottom:4},children:`{{${e.key}}}`}),(0,l.jsx)("div",{className:"bp-muted",style:{fontSize:12},children:e.label})]}),(0,l.jsx)("button",{className:"bp-btn-sm",style:{marginLeft:12,fontSize:12,padding:"6px 10px"},onClick:()=>async function(e){const a=`{{${e}}}`;try{if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(a);else{const e=document.createElement("textarea");e.value=a,e.style.position="fixed",e.style.opacity="0",document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)}b(e),setTimeout(()=>b(""),1500)}catch(e){console.error(e),m("Copy failed.")}}(e.key),children:p===e.key?"Copied":"Copy"})]},e.key))})]},e.label))]})]})}):null}const F=[{value:"booking_created",label:"Booking Created"},{value:"booking_updated",label:"Booking Updated"},{value:"booking_confirmed",label:"Booking Confirmed"},{value:"booking_cancelled",label:"Booking Cancelled"},{value:"customer_created",label:"Customer Created"}];function U({workflowId:e,onClose:a,onSaved:s}){const[n,t]=(0,i.useState)(null),[c,r]=(0,i.useState)([]),[o,m]=(0,i.useState)(!0),[p,b]=(0,i.useState)(!1),[h,u]=(0,i.useState)(null),[v,x]=(0,i.useState)(""),[j,g]=(0,i.useState)(""),[N,f]=(0,i.useState)(!1),[y,_]=(0,i.useState)("");async function k(){m(!0),x("");try{const a=await d(`/admin/notifications/workflows/${e}`);t(a?.data||null),r(a?.data?.actions||[])}catch(e){console.error(e),x(e.message||"Failed to load workflow.")}finally{m(!1)}}function w(e,a,s){r(i=>i.map(i=>i.id===e?{...i,config:{...i.config||{},[a]:s}}:i))}return(0,i.useEffect)(()=>{e&&k()},[e]),o||!n?(0,l.jsx)("div",{className:"bp-card",style:{margin:14},children:"Loading workflowâ€¦"}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"bp-drawer-head",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"bp-drawer-title",children:n.name||`Workflow #${n.id}`}),(0,l.jsx)("div",{className:"bp-muted",children:"Configure events, conditions, and email actions."})]}),(0,l.jsxs)("div",{style:{display:"flex",gap:10},children:[(0,l.jsx)("button",{className:"bp-btn bp-btn-ghost",onClick:()=>f(!0),children:"Smart variables"}),(0,l.jsx)("button",{className:"bp-top-btn",onClick:a,children:"Close"})]})]}),(0,l.jsxs)("div",{className:"bp-drawer-body",children:[v&&(0,l.jsx)("div",{className:"bp-error",children:v}),j&&(0,l.jsx)("div",{className:"bp-success",style:{marginBottom:12},children:j}),y&&(0,l.jsx)("div",{className:"bp-success",style:{marginBottom:12},children:y}),(0,l.jsxs)("div",{className:"bp-grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))"},children:[(0,l.jsxs)("div",{className:"bp-settings-field",children:[(0,l.jsx)("label",{className:"bp-label",children:"Workflow name"}),(0,l.jsx)("input",{className:"bp-input",value:n.name||"",onChange:e=>t({...n,name:e.target.value})})]}),(0,l.jsxs)("div",{className:"bp-settings-field",children:[(0,l.jsx)("label",{className:"bp-label",children:"Event"}),(0,l.jsx)("select",{className:"bp-input",value:n.event_key||"booking_created",onChange:e=>t({...n,event_key:e.target.value}),children:F.map(e=>(0,l.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,l.jsxs)("div",{className:"bp-settings-field",children:[(0,l.jsx)("label",{className:"bp-label",children:"Status"}),(0,l.jsxs)("select",{className:"bp-input",value:n.status||"active",onChange:e=>t({...n,status:e.target.value}),children:[(0,l.jsx)("option",{value:"active",children:"Active"}),(0,l.jsx)("option",{value:"disabled",children:"Disabled"})]})]}),(0,l.jsxs)("div",{className:"bp-settings-field",children:[(0,l.jsx)("label",{className:"bp-label",children:"Conditional"}),(0,l.jsxs)("label",{className:"bp-check",children:[(0,l.jsx)("input",{type:"checkbox",checked:!!n.is_conditional,onChange:e=>t({...n,is_conditional:e.target.checked})}),"Only trigger when conditions match (coming soon)"]})]}),(0,l.jsxs)("div",{className:"bp-settings-field",children:[(0,l.jsx)("label",{className:"bp-label",children:"Time offset"}),(0,l.jsxs)("label",{className:"bp-check",children:[(0,l.jsx)("input",{type:"checkbox",checked:!!n.has_time_offset,onChange:e=>t({...n,has_time_offset:e.target.checked})}),"Delay actions"]})]}),n.has_time_offset?(0,l.jsxs)("div",{className:"bp-settings-field",children:[(0,l.jsx)("label",{className:"bp-label",children:"Delay (minutes)"}),(0,l.jsx)("input",{type:"number",className:"bp-input",value:n.time_offset_minutes||0,min:"0",onChange:e=>t({...n,time_offset_minutes:Math.max(0,Number(e.target.value))})})]}):null]}),(0,l.jsxs)("div",{className:"bp-settings-actions",style:{marginTop:12},children:[(0,l.jsx)("button",{className:"bp-btn bp-btn-primary",onClick:async function(){if(n){b(!0),x(""),g("");try{await d(`/admin/notifications/workflows/${e}`,{method:"PUT",body:{name:n.name,status:n.status,event_key:n.event_key,is_conditional:!!n.is_conditional,has_time_offset:!!n.has_time_offset,time_offset_minutes:n.time_offset_minutes}}),g("Workflow saved."),s?.(),await k()}catch(e){console.error(e),x(e.message||"Unable to save workflow.")}finally{b(!1)}}},disabled:p,children:p?"Savingâ€¦":"Save workflow"}),(0,l.jsx)("button",{className:"bp-btn",onClick:async function(){if(n){x("");try{await d(`/admin/notifications/workflows/${e}/actions`,{method:"POST",body:{type:"send_email"}}),g("Action added."),s?.(),await k()}catch(e){console.error(e),x(e.message||"Could not add action.")}}},children:"+ Add action"})]}),(0,l.jsx)("div",{style:{marginTop:16},children:c.map(e=>(0,l.jsxs)("div",{className:"bp-card",style:{marginBottom:12},children:[(0,l.jsxs)("div",{className:"bp-row",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"bp-card-label",style:{marginBottom:6},children:["Action #",e.id]}),(0,l.jsxs)("div",{className:"bp-muted",style:{marginBottom:4},children:["Type: ",e.type]})]}),(0,l.jsxs)("div",{className:"bp-row-actions",children:[(0,l.jsxs)("select",{className:"bp-input",value:"disabled"===e.status?"disabled":"active",onChange:a=>r(s=>s.map(s=>s.id===e.id?{...s,status:a.target.value}:s)),children:[(0,l.jsx)("option",{value:"active",children:"Active"}),(0,l.jsx)("option",{value:"disabled",children:"Disabled"})]}),(0,l.jsx)("button",{className:"bp-chip",onClick:()=>async function(e){u(e.id),x(""),_("");try{await d(`/admin/notifications/actions/${e.id}`,{method:"PUT",body:{type:e.type,status:e.status,config:e.config}}),g("Action saved."),s?.(),await k()}catch(e){console.error(e),x(e.message||"Failed to save action.")}finally{u(null)}}(e),disabled:h===e.id,children:h===e.id?"Savingâ€¦":"Save"}),(0,l.jsx)("button",{className:"bp-chip",onClick:()=>async function(e){_(""),x("");try{await d(`/admin/notifications/actions/${e}/test`,{method:"POST"}),_("Test email triggered (uses latest booking).")}catch(e){console.error(e),x(e.message||"Test failed.")}}(e.id),children:"Test"}),(0,l.jsx)("button",{className:"bp-chip",onClick:()=>async function(e){x("");try{await d(`/admin/notifications/actions/${e}`,{method:"DELETE"}),g("Action removed."),s?.(),await k()}catch(e){console.error(e),x(e.message||"Failed to delete action.")}}(e.id),children:"Remove"})]})]}),(0,l.jsxs)("div",{className:"bp-grid",style:{gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))"},children:[(0,l.jsxs)("div",{className:"bp-settings-field",children:[(0,l.jsx)("label",{className:"bp-label",children:"To"}),(0,l.jsx)("input",{className:"bp-input",value:e.config?.to||"",onChange:a=>w(e.id,"to",a.target.value)})]}),(0,l.jsxs)("div",{className:"bp-settings-field",children:[(0,l.jsx)("label",{className:"bp-label",children:"Subject"}),(0,l.jsx)("input",{className:"bp-input",value:e.config?.subject||"",onChange:a=>w(e.id,"subject",a.target.value)})]}),(0,l.jsxs)("div",{className:"bp-settings-field",children:[(0,l.jsx)("label",{className:"bp-label",children:"From name"}),(0,l.jsx)("input",{className:"bp-input",value:e.config?.from_name||"",onChange:a=>w(e.id,"from_name",a.target.value)})]}),(0,l.jsxs)("div",{className:"bp-settings-field",children:[(0,l.jsx)("label",{className:"bp-label",children:"From email"}),(0,l.jsx)("input",{className:"bp-input",value:e.config?.from_email||"",onChange:a=>w(e.id,"from_email",a.target.value)})]})]}),(0,l.jsxs)("div",{className:"bp-settings-field",style:{marginTop:12},children:[(0,l.jsx)("label",{className:"bp-label",children:"Body (HTML)"}),(0,l.jsx)("textarea",{className:"bp-textarea",rows:"6",value:e.config?.body||"",onChange:a=>w(e.id,"body",a.target.value)})]}),(0,l.jsxs)("label",{className:"bp-check",style:{marginTop:10},children:[(0,l.jsx)("input",{type:"checkbox",checked:!!e.config?.attach_ics,onChange:a=>w(e.id,"attach_ics",a.target.checked)}),"Attach ICS calendar file"]})]},e.id))})]}),(0,l.jsx)(E,{eventKey:n.event_key||"booking_created",open:N,onClose:()=>f(!1)})]})}const W={booking_created:"Booking Created",booking_updated:"Booking Updated",booking_confirmed:"Booking Confirmed",booking_cancelled:"Booking Cancelled",customer_created:"Customer Created"};function O(){const[e,a]=(0,i.useState)([]),[s,n]=(0,i.useState)(!0),[t,c]=(0,i.useState)(""),[r,o]=(0,i.useState)(""),[m,p]=(0,i.useState)("all"),[b,h]=(0,i.useState)(null),[u,v]=(0,i.useState)(!1),[x,j]=(0,i.useState)(0);async function g(){n(!0),c("");try{const e=new URLSearchParams;r&&e.set("q",r),m&&"all"!==m&&e.set("status",m),e.set("page","1"),e.set("per","50");const s=await d(`/admin/notifications/workflows?${e.toString()}`);a(s?.data?.items||[])}catch(e){console.error(e),a([]),c(e.message||"Failed to load workflows.")}finally{n(!1)}}function N(e){h(e),v(!0),window.location.hash=`#/notifications/${e}`}function f(){v(!1),h(null),window.history.replaceState(null,"",window.location.pathname)}(0,i.useEffect)(()=>{g()},[r,m,x]);const y=e.length;return(0,l.jsxs)("div",{className:"bp-content",children:[(0,l.jsxs)("div",{className:"bp-page-head",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"bp-h1",children:"Notifications"}),(0,l.jsx)("div",{className:"bp-muted",children:"Automate emails and workflow actions for events."})]}),(0,l.jsx)("div",{className:"bp-head-actions",children:(0,l.jsx)("button",{className:"bp-primary-btn",onClick:async function(){c("");try{const e=await d("/admin/notifications/workflows",{method:"POST",body:{name:"New workflow",event_key:"booking_created",status:"active"}});e?.data?.id&&(j(e=>e+1),N(e.data.id))}catch(e){console.error(e),c(e.message||"Could not create workflow.")}},children:"+ Add workflow"})})]}),!!t&&(0,l.jsx)("div",{className:"bp-error",children:t}),(0,l.jsx)("div",{className:"bp-card",style:{marginBottom:14},children:(0,l.jsxs)("div",{style:{display:"flex",gap:10,flexWrap:"wrap"},children:[(0,l.jsx)("input",{className:"bp-input",placeholder:"Search workflows...",value:r,onChange:e=>o(e.target.value),style:{flex:"1 1 220px"}}),(0,l.jsxs)("select",{className:"bp-input",value:m,onChange:e=>p(e.target.value),children:[(0,l.jsx)("option",{value:"all",children:"Status: All"}),(0,l.jsx)("option",{value:"active",children:"Active"}),(0,l.jsx)("option",{value:"disabled",children:"Disabled"})]}),(0,l.jsx)("button",{className:"bp-btn bp-btn-ghost",onClick:g,children:"Refresh"}),(0,l.jsx)("div",{className:"bp-muted",style:{marginLeft:"auto"},children:s?"Loadingâ€¦":`${y} workflows`})]})}),s?(0,l.jsx)("div",{className:"bp-card",children:"Loading workflowsâ€¦"}):0===y?(0,l.jsx)("div",{className:"bp-card",children:"No workflows yet. Use â€œ+ Add workflowâ€ to get started."}):(0,l.jsx)("div",{style:{display:"grid",gap:10},children:e.map(e=>{var a,s;return(0,l.jsxs)("div",{className:"bp-card",style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,l.jsxs)("div",{style:{minWidth:0},children:[(0,l.jsx)("div",{style:{fontSize:16,fontWeight:900,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:e.name||`Workflow #${e.id}`}),(0,l.jsxs)("div",{className:"bp-muted",style:{marginTop:4},children:[null!==(a=W[e.event_key]||e.event_key)&&void 0!==a?a:"Event"," â€¢"," ",e.event_key]})]}),(0,l.jsxs)("div",{style:{display:"flex",gap:10,alignItems:"center"},children:[(0,l.jsx)("span",{className:"bp-chip "+("active"===e.status?"bp-chip":""),style:{textTransform:"capitalize"},children:e.status}),(0,l.jsxs)("div",{className:"bp-muted",children:[null!==(s=e.actions_count)&&void 0!==s?s:0," ",1===e.actions_count?"action":"actions"]}),(0,l.jsx)("button",{className:"bp-btn",onClick:()=>N(e.id),children:"Edit"})]})]},e.id)})}),u&&b?(0,l.jsx)("div",{className:"bp-drawer-wrap",onMouseDown:e=>{e.target===e.currentTarget&&f()},children:(0,l.jsx)("div",{className:"bp-drawer",style:{width:"min(940px, 100%)"},children:(0,l.jsx)(U,{workflowId:b,onClose:f,onSaved:()=>j(e=>e+1)})})}):null]})}function z(){const e=window.BP_ADMIN?.page||"bp_dashboard",a=(0,i.useMemo)(()=>function(e){switch(e){case"bp_dashboard":default:return"dashboard";case"bp-bookings":case"bp_bookings":return"bookings";case"bp-calendar":case"bp_calendar":return"calendar";case"bp-schedule":case"bp_schedule":return"schedule";case"bp-holidays":case"bp_holidays":return"holidays";case"bp-services":case"bp_services":return"services";case"bp-categories":case"bp_categories":return"categories";case"bp-extras":case"bp_extras":return"extras";case"bp-promo-codes":case"bp_promo_codes":return"promo";case"bp-form-fields":return"form-fields";case"bp-customers":case"bp_customers":return"customers";case"bp-agents":case"bp_agents":return"agents";case"bp-settings":case"bp_settings":return"settings";case"bp-notifications":case"bp_notifications":return"notifications";case"bp-audit-log":case"bp_audit":return"audit";case"bp-tools":case"bp_tools":return"tools"}}(e),[e]),[s,n]=(0,i.useState)("light");return(0,i.useEffect)(()=>{const e="dark"===localStorage.getItem("bp_theme")?"dark":"light";n(e),document.documentElement.classList.toggle("bp-dark","dark"===e)},[]),(0,l.jsxs)(c,{theme:s,onToggleTheme:function(){const e="dark"===s?"light":"dark";n(e),localStorage.setItem("bp_theme",e),document.documentElement.classList.toggle("bp-dark","dark"===e)},active:a,children:["dashboard"===a?(0,l.jsx)(o,{}):null,"bookings"===a?(0,l.jsx)(p,{}):null,"form-fields"===a?(0,l.jsx)(j,{}):null,"services"===a?(0,l.jsx)(_,{}):null,"categories"===a?(0,l.jsx)(k,{}):null,"extras"===a?(0,l.jsx)(w,{}):null,"promo"===a?(0,l.jsx)(S,{}):null,"customers"===a?(0,l.jsx)(P,{}):null,"agents"===a?(0,l.jsx)(T,{}):null,"settings"===a?(0,l.jsx)(L,{}):null,"audit"===a?(0,l.jsx)(M,{}):null,"tools"===a?(0,l.jsx)(I,{}):null,"notifications"===a?(0,l.jsx)(O,{}):null,["calendar","schedule","holidays","catalog"].includes(a)?(0,l.jsx)(K,{title:a}):null]})}function K({title:e}){return(0,l.jsxs)("div",{className:"bp-card",children:[(0,l.jsx)("div",{className:"bp-card-label",children:"Page"}),(0,l.jsxs)("div",{className:"bp-card-value",style:{fontSize:18,marginTop:6},children:[e," (UI shell active âœ…)"]}),(0,l.jsx)("div",{className:"bp-muted",style:{marginTop:8},children:"Next: we design and connect this page with Horizon UI layout."})]})}document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("bp-admin-app");e&&(0,t.H)(e).render((0,l.jsx)(z,{}))})})();